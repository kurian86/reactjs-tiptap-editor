"use strict";var Cn=Object.defineProperty;var yn=(e,n,i)=>n in e?Cn(e,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[n]=i;var ke=(e,n,i)=>yn(e,typeof n!="symbol"?n+"":n,i);const t=require("react/jsx-runtime"),d=require("react"),z=require("./tiptap-BVUeocJy.cjs"),A=require("./index-BjXAbPU2.cjs"),Tn=require("@radix-ui/react-separator"),R=require("./vendor-C1NROhrC.cjs"),Nn=require("@radix-ui/react-toast"),b=require("lucide-react"),Sn=require("@radix-ui/react-tooltip"),F=require("easydrawer"),Pt=require("@radix-ui/react-slot"),kn=require("@radix-ui/react-toggle"),Ae=require("@radix-ui/react-icons"),An=require("@radix-ui/react-dialog"),Mn=require("@radix-ui/react-popover"),En=require("@radix-ui/react-label"),Ln=require("re-resizable"),zt=require("tippy.js"),In=require("react-colorful"),Rn=require("@radix-ui/react-switch"),Pn=require("@radix-ui/react-tabs"),zn=require("react-image-crop"),Dn=require("@radix-ui/react-checkbox"),_n=require("@radix-ui/react-dropdown-menu");function J(e){const n=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const i in e)if(i!=="default"){const r=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:()=>e[i]})}}return n.default=e,Object.freeze(n)}const V=J(d),Dt=J(Tn),Y=J(Nn),Ne=J(Sn),_t=J(kn),K=J(An),be=J(Mn),Ot=J(En),Ge=J(Rn),se=J(Pn),Ue=J(Dn),W=J(_n);function k(...e){return R.twMerge(R.clsx(e))}let Ve;function $e(){return Ve===void 0&&(Ve=navigator.platform.includes("Mac")),Ve}function Ht(e){return`${e}`.toLowerCase()==="mod"?$e()?"⌘":"Ctrl":`${e}`.toLowerCase()==="alt"?$e()?"⌥":"Alt":`${e}`.toLowerCase()==="shift"?$e()?"⇧":"Shift":e}function Bt(e){return e.map(Ht).join(" ")}const _=d.forwardRef((e,n)=>{const{icon:i=void 0,tooltip:r=void 0,disabled:o=!1,customClass:s="",loading:c=void 0,shortcutKeys:l=void 0,tooltipOptions:a={},action:h=void 0,isActive:u=void 0,children:x,asChild:m=!1,upload:f=!1,...w}=e,p=ct[i],g=m?Pt.Slot:rt;return t.jsxs(ot,{children:[t.jsx(st,{asChild:!0,children:t.jsxs(g,{"data-state":u!=null&&u()?"on":"off",onClick:h,ref:n,size:"sm",className:k("richtext-w-[32px] richtext-h-[32px]",s),disabled:o,...w,children:[p&&t.jsx(p,{className:"richtext-size-4"}),x]})}),r&&t.jsx(Oe,{...a,children:t.jsxs("div",{className:"richtext-flex richtext-max-w-24 richtext-flex-col richtext-items-center richtext-text-center",children:[t.jsx("div",{children:r}),!!(l!=null&&l.length)&&t.jsx("span",{children:Bt(l)})]})})]})});function On(e,n,i){return e<n?n:e>i?i:e}const Hn=e=>typeof e=="number",Bn=e=>typeof e=="string",Vn=e=>typeof e=="function";function $n(e,n="px"){if(!e)return e;const i=Hn(e)?String(e):e,r=Number.parseFloat(i),o=i.match(/[%a-z]+$/i),s=o?o[0]:n;return Number.isNaN(r)?e:r+s}function Vt(e,n){if(!e)return!1;const{extensions:i=[]}=(e==null?void 0:e.extensionManager)??{};return!!i.find(o=>o.name===n)}function Fn(e){return e.map(n=>Bn(n)?{value:n,name:n}:n)}const Wn=R.cva("richtext-inline-flex richtext-items-center richtext-justify-center richtext-whitespace-nowrap richtext-rounded-md richtext-text-sm richtext-font-medium richtext-ring-offset-background richtext-transition-colors focus-visible:richtext-outline-none focus-visible:richtext-ring-2 focus-visible:richtext-ring-ring focus-visible:richtext-ring-offset-2 disabled:richtext-pointer-events-none disabled:richtext-opacity-50",{variants:{variant:{default:"!richtext-bg-primary !richtext-text-primary-foreground hover:!richtext-bg-primary/90",destructive:"richtext-bg-destructive richtext-text-destructive-foreground hover:richtext-bg-destructive/90",outline:"richtext-border richtext-border-input richtext-bg-background hover:richtext-bg-accent hover:richtext-text-accent-foreground",secondary:"richtext-bg-secondary richtext-text-secondary-foreground hover:richtext-bg-secondary/80",ghost:"hover:richtext-bg-accent hover:richtext-text-accent-foreground",link:"richtext-text-primary richtext-underline-offset-4 hover:richtext-underline"},size:{default:"richtext-h-10 richtext-px-4 richtext-py-2",sm:"richtext-h-9 richtext-rounded-md richtext-px-3",lg:"richtext-h-11 richtext-rounded-md richtext-px-8",icon:"richtext-h-10 richtext-w-10"}},defaultVariants:{variant:"default",size:"default"}}),G=V.forwardRef(({className:e,variant:n,size:i,asChild:r=!1,...o},s)=>{const c=r?Pt.Slot:"button";return t.jsx(c,{className:k(Wn({variant:n,size:i,className:e})),ref:s,...o})});G.displayName="Button";const $t=W.Root,Ft=W.Trigger,bt=W.Portal,jt=W.Sub,Xe=V.forwardRef(({className:e,inset:n,children:i,...r},o)=>t.jsxs(W.SubTrigger,{ref:o,className:k("richtext-flex richtext-cursor-default richtext-select-none richtext-items-center richtext-rounded-sm richtext-px-2 richtext-py-1.5 richtext-text-sm richtext-outline-none focus:richtext-bg-accent data-[state=open]:richtext-bg-accent",n&&"richtext-pl-8",e),...r,children:[i,t.jsx(b.ChevronRight,{className:"richtext-ml-auto richtext-h-4 richtext-w-4"})]}));Xe.displayName=W.SubTrigger.displayName;const Ze=V.forwardRef(({className:e,...n},i)=>t.jsx(W.SubContent,{ref:i,className:k("richtext-z-50 richtext-min-w-[8rem] richtext-overflow-hidden richtext-rounded-md !richtext-border richtext-bg-popover richtext-p-1 richtext-text-popover-foreground richtext-shadow-lg data-[state=open]:richtext-animate-in data-[state=closed]:richtext-animate-out data-[state=closed]:richtext-fade-out-0 data-[state=open]:richtext-fade-in-0 data-[state=closed]:richtext-zoom-out-95 data-[state=open]:richtext-zoom-in-95 data-[side=bottom]:richtext-slide-in-from-top-2 data-[side=left]:richtext-slide-in-from-right-2 data-[side=right]:richtext-slide-in-from-left-2 data-[side=top]:richtext-slide-in-from-bottom-2",e),...n}));Ze.displayName=W.SubContent.displayName;const et=V.forwardRef(({className:e,sideOffset:n=4,...i},r)=>t.jsx(W.Portal,{children:t.jsx(W.Content,{ref:r,sideOffset:n,className:k("richtext-z-50 richtext-min-w-[8rem] richtext-overflow-hidden richtext-rounded-md !richtext-border richtext-bg-popover richtext-p-1 richtext-text-popover-foreground richtext-shadow-md data-[state=open]:richtext-animate-in data-[state=closed]:richtext-animate-out data-[state=closed]:richtext-fade-out-0 data-[state=open]:richtext-fade-in-0 data-[state=closed]:richtext-zoom-out-95 data-[state=open]:richtext-zoom-in-95 data-[side=bottom]:richtext-slide-in-from-top-2 data-[side=left]:richtext-slide-in-from-right-2 data-[side=right]:richtext-slide-in-from-left-2 data-[side=top]:richtext-slide-in-from-bottom-2",e),...i})}));et.displayName=W.Content.displayName;const ee=V.forwardRef(({className:e,inset:n,...i},r)=>t.jsx(W.Item,{ref:r,className:k("richtext-relative richtext-flex richtext-cursor-default richtext-select-none richtext-items-center richtext-rounded-sm richtext-px-2 richtext-py-1.5 richtext-text-sm richtext-outline-none richtext-transition-colors focus:richtext-bg-accent focus:richtext-text-accent-foreground data-[disabled]:richtext-pointer-events-none data-[disabled]:richtext-opacity-50",n&&"richtext-pl-8",e),...i}));ee.displayName=W.Item.displayName;const Wt=V.forwardRef(({className:e,children:n,checked:i,...r},o)=>t.jsxs(W.CheckboxItem,{ref:o,className:k("richtext-relative richtext-flex richtext-cursor-default richtext-select-none richtext-items-center richtext-rounded-sm richtext-py-1.5 richtext-pl-8 richtext-pr-2 richtext-text-sm richtext-outline-none richtext-transition-colors focus:richtext-bg-accent focus:richtext-text-accent-foreground data-[disabled]:richtext-pointer-events-none data-[disabled]:richtext-opacity-50",e),checked:i,...r,children:[t.jsx("span",{className:"richtext-absolute richtext-left-2 richtext-flex richtext-h-3.5 richtext-w-3.5 richtext-items-center richtext-justify-center",children:t.jsx(W.ItemIndicator,{children:t.jsx(b.Check,{className:"richtext-h-4 richtext-w-4"})})}),n]}));Wt.displayName=W.CheckboxItem.displayName;const qn=V.forwardRef(({className:e,children:n,...i},r)=>t.jsxs(W.RadioItem,{ref:r,className:k("richtext-relative richtext-flex richtext-cursor-default richtext-select-none richtext-items-center richtext-rounded-sm richtext-py-1.5 richtext-pl-8 richtext-pr-2 richtext-text-sm richtext-outline-none richtext-transition-colors focus:richtext-bg-accent focus:richtext-text-accent-foreground data-[disabled]:richtext-pointer-events-none data-[disabled]:richtext-opacity-50",e),...i,children:[t.jsx("span",{className:"richtext-absolute richtext-left-2 richtext-flex richtext-h-3.5 richtext-w-3.5 richtext-items-center richtext-justify-center",children:t.jsx(W.ItemIndicator,{children:t.jsx(b.Circle,{className:"richtext-h-2 richtext-w-2 richtext-fill-current"})})}),n]}));qn.displayName=W.RadioItem.displayName;const Gn=V.forwardRef(({className:e,inset:n,...i},r)=>t.jsx(W.Label,{ref:r,className:k("richtext-px-2 richtext-py-1.5 richtext-text-sm richtext-font-semibold",n&&"richtext-pl-8",e),...i}));Gn.displayName=W.Label.displayName;const tt=V.forwardRef(({className:e,...n},i)=>t.jsx(W.Separator,{ref:i,className:k("richtext--mx-1 richtext-my-1 richtext-h-px richtext-bg-muted",e),...n}));tt.displayName=W.Separator.displayName;function qt({className:e,...n}){return t.jsx("span",{className:k("richtext-ml-auto richtext-text-xs richtext-tracking-widest richtext-opacity-60",e),...n})}qt.displayName="DropdownMenuShortcut";const Z=V.forwardRef(({className:e,type:n,...i},r)=>t.jsx("input",{type:n,className:k("richtext-flex richtext-h-10 richtext-w-full richtext-rounded-md !richtext-border richtext-border-input richtext-bg-background richtext-px-3 richtext-py-2 richtext-text-sm richtext-ring-offset-background file:richtext-border-0 file:richtext-bg-transparent file:richtext-text-sm file:richtext-font-medium placeholder:richtext-text-muted-foreground focus-visible:richtext-outline-none  disabled:richtext-cursor-not-allowed disabled:richtext-opacity-50",e),ref:r,...i}));Z.displayName="Input";const Un=R.cva("richtext-text-sm richtext-font-medium richtext-leading-none peer-disabled:richtext-cursor-not-allowed peer-disabled:richtext-opacity-70"),ne=V.forwardRef(({className:e,...n},i)=>t.jsx(Ot.Root,{ref:i,className:k(Un(),e),...n}));ne.displayName=Ot.Root.displayName;const xe=be.Root,me=be.Trigger,ce=V.forwardRef(({className:e,align:n="center",sideOffset:i=4,...r},o)=>t.jsx(be.Portal,{children:t.jsx(be.Content,{ref:o,align:n,sideOffset:i,className:k("richtext-z-50 richtext-w-72 richtext-rounded-md !richtext-border richtext-bg-popover richtext-p-4 richtext-text-popover-foreground richtext-shadow-md richtext-outline-none data-[state=open]:richtext-animate-in data-[state=closed]:richtext-animate-out data-[state=closed]:richtext-fade-out-0 data-[state=open]:richtext-fade-in-0 data-[state=closed]:richtext-zoom-out-95 data-[state=open]:richtext-zoom-in-95 data-[side=bottom]:richtext-slide-in-from-top-2 data-[side=left]:richtext-slide-in-from-right-2 data-[side=right]:richtext-slide-in-from-left-2 data-[side=top]:richtext-slide-in-from-bottom-2",e),...r})}));ce.displayName=be.Content.displayName;const Q=V.forwardRef(({className:e,orientation:n="horizontal",decorative:i=!0,...r},o)=>t.jsx(Dt.Root,{ref:o,decorative:i,orientation:n,className:k("richtext-shrink-0 richtext-bg-border",n==="horizontal"?"richtext-h-[1px] richtext-w-full":"richtext-h-full richtext-w-[1px]",e),...r}));Q.displayName=Dt.Root.displayName;const nt=V.forwardRef(({className:e,...n},i)=>t.jsx(Ge.Root,{className:k("richtext-peer richtext-inline-flex richtext-h-6 richtext-w-11 richtext-shrink-0 richtext-cursor-pointer richtext-items-center richtext-rounded-full richtext-border-2 richtext-border-transparent richtext-transition-colors focus-visible:richtext-outline-none focus-visible:richtext-ring-2 focus-visible:richtext-ring-ring focus-visible:richtext-ring-offset-2 focus-visible:richtext-ring-offset-background disabled:richtext-cursor-not-allowed disabled:richtext-opacity-50 data-[state=checked]:richtext-bg-primary data-[state=unchecked]:richtext-bg-input",e),...n,ref:i,children:t.jsx(Ge.Thumb,{className:k("richtext-pointer-events-none richtext-block richtext-h-5 richtext-w-5 richtext-rounded-full richtext-bg-background richtext-shadow-lg richtext-ring-0 richtext-transition-transform data-[state=checked]:richtext-translate-x-5 data-[state=unchecked]:richtext-translate-x-0")})}));nt.displayName=Ge.Root.displayName;const Gt=se.Root,it=V.forwardRef(({className:e,...n},i)=>t.jsx(se.List,{ref:i,className:k("richtext-inline-flex richtext-h-10 richtext-items-center richtext-justify-center richtext-rounded-md richtext-bg-muted richtext-p-1 richtext-text-muted-foreground",e),...n}));it.displayName=se.List.displayName;const je=V.forwardRef(({className:e,...n},i)=>t.jsx(se.Trigger,{ref:i,className:k("richtext-inline-flex richtext-items-center richtext-justify-center richtext-whitespace-nowrap richtext-rounded-sm richtext-px-3 richtext-py-1.5 richtext-text-sm richtext-font-medium richtext-ring-offset-background richtext-transition-all focus-visible:richtext-outline-none focus-visible:richtext-ring-2 focus-visible:richtext-ring-ring focus-visible:richtext-ring-offset-2 disabled:richtext-pointer-events-none disabled:richtext-opacity-50 data-[state=active]:richtext-bg-background data-[state=active]:richtext-text-foreground data-[state=active]:richtext-shadow-sm",e),...n}));je.displayName=se.Trigger.displayName;const Ce=V.forwardRef(({className:e,...n},i)=>t.jsx(se.Content,{ref:i,className:k("richtext-mt-2 richtext-ring-offset-background focus-visible:richtext-outline-none focus-visible:richtext-ring-2 focus-visible:richtext-ring-ring focus-visible:richtext-ring-offset-2",e),...n}));Ce.displayName=se.Content.displayName;const Xn=Y.Provider,Ut=V.forwardRef(({className:e,...n},i)=>t.jsx(Y.Viewport,{ref:i,className:k("richtext-fixed richtext-top-0 richtext-z-[100] richtext-flex richtext-max-h-screen richtext-w-full richtext-flex-col-reverse richtext-p-4 sm:richtext-bottom-0 sm:richtext-right-0 sm:richtext-top-auto sm:richtext-flex-col md:richtext-max-w-[420px]",e),...n}));Ut.displayName=Y.Viewport.displayName;const Zn=R.cva("richtext-group richtext-pointer-events-auto richtext-relative richtext-flex richtext-w-full richtext-items-center richtext-justify-between richtext-space-x-4 richtext-overflow-hidden richtext-rounded-md !richtext-border richtext-p-6 richtext-pr-8 richtext-shadow-lg richtext-transition-all data-[swipe=cancel]:richtext-translate-x-0 data-[swipe=end]:richtext-translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:richtext-translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:richtext-transition-none data-[state=open]:richtext-animate-in data-[state=closed]:richtext-animate-out data-[swipe=end]:richtext-animate-out data-[state=closed]:richtext-fade-out-80 data-[state=closed]:richtext-slide-out-to-right-full data-[state=open]:richtext-slide-in-from-top-full data-[state=open]:sm:richtext-slide-in-from-bottom-full",{variants:{variant:{default:"richtext-border richtext-bg-background richtext-text-foreground",destructive:"richtext-destructive richtext-group richtext-border-destructive richtext-bg-destructive richtext-text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Xt=V.forwardRef(({className:e,variant:n,...i},r)=>t.jsx(Y.Root,{ref:r,className:k(Zn({variant:n}),e),...i}));Xt.displayName=Y.Root.displayName;const Yn=V.forwardRef(({className:e,...n},i)=>t.jsx(Y.Action,{ref:i,className:k("richtext-inline-flex richtext-h-8 richtext-shrink-0 richtext-items-center richtext-justify-center richtext-rounded-md !richtext-border richtext-bg-transparent richtext-px-3 richtext-text-sm richtext-font-medium richtext-ring-offset-background richtext-transition-colors hover:richtext-bg-secondary focus:richtext-outline-none focus:richtext-ring-2 focus:richtext-ring-ring focus:richtext-ring-offset-2 disabled:richtext-pointer-events-none disabled:richtext-opacity-50 group-[.destructive]:richtext-border-muted/40 group-[.destructive]:hover:richtext-border-destructive/30 group-[.destructive]:hover:richtext-bg-destructive group-[.destructive]:hover:richtext-text-destructive-foreground group-[.destructive]:focus:richtext-ring-destructive",e),...n}));Yn.displayName=Y.Action.displayName;const Zt=V.forwardRef(({className:e,...n},i)=>t.jsx(Y.Close,{ref:i,className:k("richtext-absolute richtext-right-2 richtext-top-2 richtext-rounded-md richtext-p-1 richtext-text-foreground/50 richtext-opacity-0 richtext-transition-opacity hover:richtext-text-foreground focus:richtext-opacity-100 focus:richtext-outline-none focus:richtext-ring-2 group-hover:richtext-opacity-100 group-[.destructive]:richtext-text-red-300 group-[.destructive]:hover:richtext-text-red-50 group-[.destructive]:focus:richtext-ring-red-400 group-[.destructive]:focus:richtext-ring-offset-red-600",e),"toast-close":"",...n,children:t.jsx(b.X,{className:"richtext-h-4 richtext-w-4"})}));Zt.displayName=Y.Close.displayName;const Yt=V.forwardRef(({className:e,...n},i)=>t.jsx(Y.Title,{ref:i,className:k("richtext-text-sm richtext-font-semibold",e),...n}));Yt.displayName=Y.Title.displayName;const Kt=V.forwardRef(({className:e,...n},i)=>t.jsx(Y.Description,{ref:i,className:k("richtext-text-sm richtext-opacity-90",e),...n}));Kt.displayName=Y.Description.displayName;const Kn=R.cva("richtext-inline-flex richtext-items-center richtext-justify-center richtext-rounded-md richtext-text-sm richtext-font-medium richtext-ring-offset-background richtext-transition-colors hover:richtext-bg-muted hover:richtext-text-muted-foreground focus-visible:richtext-outline-none focus-visible:richtext-ring-2 focus-visible:richtext-ring-ring focus-visible:richtext-ring-offset-2 disabled:richtext-pointer-events-none disabled:richtext-opacity-50 data-[state=on]:richtext-bg-accent data-[state=on]:richtext-text-accent-foreground",{variants:{variant:{default:"richtext-bg-transparent",outline:"richtext-border richtext-border-input richtext-bg-transparent hover:richtext-bg-accent hover:richtext-text-accent-foreground"},size:{default:"richtext-h-10 richtext-px-3",sm:"richtext-h-9 richtext-px-2",lg:"richtext-h-11 richtext-px-5"}},defaultVariants:{variant:"default",size:"default"}}),rt=V.forwardRef(({className:e,variant:n,size:i,...r},o)=>t.jsx(_t.Root,{ref:o,className:k(Kn({variant:n,size:i,className:e})),...r}));rt.displayName=_t.Root.displayName;const Jn=Ne.Provider,ot=Ne.Root,st=Ne.Trigger,Oe=V.forwardRef(({className:e,sideOffset:n=4,...i},r)=>t.jsx(Ne.Content,{ref:r,sideOffset:n,className:k("richtext-z-50 richtext-overflow-hidden richtext-rounded-md !richtext-border richtext-bg-popover richtext-px-3 richtext-py-1.5 richtext-text-sm richtext-text-popover-foreground richtext-shadow-md richtext-animate-in richtext-fade-in-0 richtext-zoom-in-95 data-[side=bottom]:richtext-slide-in-from-top-2 data-[side=left]:richtext-slide-in-from-right-2 data-[side=right]:richtext-slide-in-from-left-2 data-[side=top]:richtext-slide-in-from-bottom-2",e),...i}));Oe.displayName=Ne.Content.displayName;const Qn=1,ei=1e6;let Fe=0;function ti(){return Fe=(Fe+1)%Number.MAX_SAFE_INTEGER,Fe.toString()}const We=new Map;function Ct(e){if(We.has(e))return;const n=setTimeout(()=>{We.delete(e),ve({type:"REMOVE_TOAST",toastId:e})},ei);We.set(e,n)}function ni(e,n){switch(n.type){case"ADD_TOAST":return{...e,toasts:[n.toast,...e.toasts].slice(0,Qn)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(i=>i.id===n.toast.id?{...i,...n.toast}:i)};case"DISMISS_TOAST":{const{toastId:i}=n;return i?Ct(i):e.toasts.forEach(r=>{Ct(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===i||i===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return n.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(i=>i.id!==n.toastId)}}}const Re=[];let Pe={toasts:[]};function ve(e){Pe=ni(Pe,e),Re.forEach(n=>{n(Pe)})}function ii({...e}){const n=ti(),i=o=>ve({type:"UPDATE_TOAST",toast:{...o,id:n}}),r=()=>ve({type:"DISMISS_TOAST",toastId:n});return ve({type:"ADD_TOAST",toast:{...e,id:n,open:!0,onOpenChange:o=>{o||r()}}}),{id:n,dismiss:r,update:i}}function Jt(){const[e,n]=V.useState(Pe);return V.useEffect(()=>(Re.push(n),()=>{const i=Re.indexOf(n);i>-1&&Re.splice(i,1)}),[e]),{...e,toast:ii,dismiss:i=>ve({type:"DISMISS_TOAST",toastId:i})}}const Qt=V.forwardRef(({className:e,...n},i)=>t.jsx(Ue.Root,{ref:i,className:k("!richtext-peer !richtext-h-4 !richtext-w-4 !richtext-p-0 !richtext-shrink-0 !richtext-rounded-sm !richtext-border !richtext-border-primary !richtext-ring-offset-background focus-visible:!richtext-outline-none focus-visible:!richtext-ring-2 focus-visible:!richtext-ring-ring focus-visible:!richtext-ring-offset-2 disabled:!richtext-cursor-not-allowed disabled:!richtext-opacity-50 data-[state=checked]:!richtext-bg-primary data-[state=checked]:!richtext-text-primary-foreground",e),...n,children:t.jsx(Ue.Indicator,{className:k("!richtext-flex !richtext-p-0 !richtext-items-center !richtext-justify-center !richtext-text-current"),children:t.jsx(b.Check,{className:"!richtext-h-4 !richtext-w-4"})})}));Qt.displayName=Ue.Root.displayName;function ri(e){return t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",...e,children:t.jsx("path",{fill:"currentColor",d:"M19 12h-2v3h-3v2h5zM7 9h3V7H5v5h2zm14-6H3a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2m0 16H3V5h18z"})})}function oi(e){return t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",...e,children:t.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 15h15m0 4H6m9-8h6m0-4h-6M9 9h1a1 1 0 1 1-1 1V7.5a2 2 0 0 1 2-2M3 9h1a1 1 0 1 1-1 1V7.5a2 2 0 0 1 2-2"})})}function si(){return t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",className:"richtext-w-4 richtext-h-4",width:"1em",height:"1em",viewBox:"0 0 24 24",children:t.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M5.5 3c1.404 0 2.107 0 2.611.38c.219.164.406.375.552.62C9 4.568 9 5.358 9 6.938v10.125c0 1.58 0 2.37-.337 2.937a2.1 2.1 0 0 1-.552.621c-.504.38-1.207.38-2.611.38s-2.107 0-2.611-.38a2.1 2.1 0 0 1-.552-.62C2 19.432 2 18.642 2 17.062V6.938c0-1.58 0-2.37.337-2.938a2.1 2.1 0 0 1 .552-.62C3.393 3 4.096 3 5.5 3M20 11.938v5.124c0 1.58 0 2.37-.337 2.938a2.1 2.1 0 0 1-.552.62c-.504.38-1.207.38-2.611.38s-2.107 0-2.611-.38a2.1 2.1 0 0 1-.552-.62C13 19.433 13 18.642 13 17.063V6.938c0-1.58 0-2.37.337-2.938M22 9l-6-6m6 0l-6 6",color:"currentColor"})})}function ci(){return t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",className:"richtext-w-4 richtext-h-4",width:"1em",height:"1em",viewBox:"0 0 24 24",children:t.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M21 18.5c0 1.404 0 2.107-.38 2.611a2.1 2.1 0 0 1-.62.552c-.567.337-1.358.337-2.937.337H6.938c-1.58 0-2.37 0-2.938-.337a2.1 2.1 0 0 1-.62-.552C3 20.607 3 19.904 3 18.5s0-2.107.38-2.611c.163-.218.374-.406.62-.552C4.567 15 5.357 15 6.938 15h10.125c1.58 0 2.37 0 2.937.337c.246.146.457.334.62.552c.38.504.38 1.207.38 2.611M12.063 4H6.937C5.358 4 4.568 4 4 4.337a2.1 2.1 0 0 0-.62.552C3 5.393 3 6.096 3 7.5s0 2.107.38 2.611c.163.218.374.406.62.552C4.567 11 5.357 11 6.938 11h10.125c1.58 0 2.37 0 2.937-.337M21 8l-6-6m6 0l-6 6",color:"currentColor"})})}function ai(e){return t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",...e,children:t.jsx("path",{fill:"currentColor",d:"M14 2H6a2 2 0 0 0-2 2v16c0 1.11.89 2 2 2h12c1.11 0 2-.89 2-2V8zm4 18H6V4h7v5h5zm-.65-10l-2.1 9h-1.4l-1.8-6.79l-1.8 6.79h-1.4l-2.2-9h1.5l1.4 6.81l1.8-6.81h1.3l1.8 6.81l1.4-6.81z"})})}function U(e){const n=ct[e.name];return n?t.jsx(n,{onClick:e==null?void 0:e.onClick,className:`richtext-w-4 richtext-h-4 ${(e==null?void 0:e.className)||""}`}):null}function li(e){return t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",...e,children:t.jsx("path",{fill:"currentColor",d:"M21 22H3v-2h18zm0-18H3V2h18zm-11 9.7h4l-2-5.4zM11.2 6h1.7l4.7 12h-2l-.9-2.6H9.4L8.5 18h-2z"})})}function en(e){return t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",width:"1em",height:"1em",viewBox:"0 0 48 48",...e,children:t.jsx("path",{fill:"currentColor",stroke:"currentColor",strokeLinejoin:"round",strokeWidth:4,d:"M36 19L24 31L12 19z"})})}function di(e){return t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",...e,children:t.jsx("path",{fill:"currentColor",d:"M9 7v10h6v-2h-4V7z"})})}function hi(e){return t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",...e,children:t.jsx("path",{fill:"currentColor",d:"M9 7c-1.1 0-2 .9-2 2v8h2V9h2v7h2V9h2v8h2V9a2 2 0 0 0-2-2z"})})}function ui(e){return t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",...e,children:t.jsx("path",{fill:"currentColor",d:"M11 7c-1.1 0-2 .9-2 2v2a2 2 0 0 0 2 2h2v2H9v2h4c1.11 0 2-.89 2-2v-2a2 2 0 0 0-2-2h-2V9h4V7z"})})}function xi(){return t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:t.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14 4h4a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1m-9 8h4m-2-2v4"})})}function mi(){return t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:t.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 4h4a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1m9 8h4m-2-2v4"})})}function fi(){return t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:t.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 21v-4m0-4V9m0-4V3m-2 18h4M8 5v4h11l2-2l-2-2zm6 8v4H6l-2-2l2-2z"})})}function tn(){return t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 32 32",children:[t.jsx("path",{fill:"currentColor",d:"M30 18v-2h-6v10h2v-4h3v-2h-3v-2zm-11 8h-4V16h4a3.003 3.003 0 0 1 3 3v4a3.003 3.003 0 0 1-3 3m-2-2h2a1 1 0 0 0 1-1v-4a1 1 0 0 0-1-1h-2zm-6-8H6v10h2v-3h3a2.003 2.003 0 0 0 2-2v-3a2 2 0 0 0-2-2m-3 5v-3h3l.001 3z"}),t.jsx("path",{fill:"currentColor",d:"M22 14v-4a.91.91 0 0 0-.3-.7l-7-7A.9.9 0 0 0 14 2H4a2.006 2.006 0 0 0-2 2v24a2 2 0 0 0 2 2h16v-2H4V4h8v6a2.006 2.006 0 0 0 2 2h6v2Zm-8-4V4.4l5.6 5.6Z"})]})}function nn(){return t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",className:"icon",viewBox:"0 0 1024 1024",children:[t.jsx("path",{fill:"currentColor",d:"M679.253 402.364 618.77 561.015l-60.348-158.651a30.04 30.04 0 0 0-30.447-18.637 29.76 29.76 0 0 0-30.447 18.637l-60.416 158.651-60.416-158.651a30.515 30.515 0 0 0-38.843-17.272 28.945 28.945 0 0 0-17.954 37.547l88.815 233.267c4.369 11.469 15.7 19.115 28.398 19.115a30.31 30.31 0 0 0 28.468-19.115l62.395-163.908 62.396 163.84c4.437 11.605 15.701 19.183 28.4 19.183a30.31 30.31 0 0 0 28.466-19.115l88.747-233.267a28.945 28.945 0 0 0-17.886-37.547 30.447 30.447 0 0 0-38.912 17.272zm219.478 395.605-51.883-29.218c-28.672-16.18-52.224-3.072-52.224 29.082v.273H643.209a29.833 29.833 0 0 0-30.31 29.354c0 16.18 13.584 29.218 30.31 29.218h151.825c1.092 30.516 24.03 43.077 52.224 27.648l51.063-27.989c29.013-15.906 29.15-42.189.41-58.368"}),t.jsx("path",{fill:"currentColor",d:"m810.667 913.135-.478.068H201.796c-19.865 0-36.727-11.673-36.727-25.6v-618.36h154.965c51.268 0 92.911-39.39 92.911-87.858v-87.86H810.19c19.797 0 36.522 11.742 36.522 25.669V739.26h61.987V119.262c0-46.421-44.169-84.241-98.51-84.241H328.364l-225.28 194.56v658.09c0 46.285 44.236 84.105 98.713 84.105H810.19c43.759 0 80.554-24.713 93.32-58.573h-92.842zM350.89 94.89v86.562c0 16.11-13.858 29.286-30.925 29.286H216.815L350.959 94.891z"})]})}function gi(){return t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:t.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",color:"currentColor",children:[t.jsx("path",{d:"M14.86 22h-4.312c-3.291 0-4.937 0-6.08-.798a4.2 4.2 0 0 1-.863-.805c-.855-1.066-.855-2.6-.855-5.67v-2.545c0-2.963 0-4.445.473-5.628c.761-1.903 2.37-3.403 4.41-4.113C8.9 2 10.49 2 13.667 2c1.816 0 2.723 0 3.448.252c1.166.406 2.085 1.263 2.52 2.35c.27.676.27 1.523.27 3.216V10"}),t.jsx("path",{d:"M2.75 12c0-1.84 1.506-3.333 3.364-3.333c.672 0 1.464.116 2.117-.057a1.67 1.67 0 0 0 1.19-1.179c.174-.647.057-1.432.057-2.098C9.478 3.493 10.984 2 12.84 2m.002 16h2.523m-4.949-4.15c-.126-.8-.281-.801-1.61-.85h-1.01c-.557 0-1.009.448-1.009 1v3c0 .552.452 1 1.01 1h1.816c.39 0 .803-.313.803-.7v-1.1c0-.11-.113-.304-.224-.304H9.068M12.842 13h1.261m0 0h1.262m-1.262 0v4.875M21.251 13h-2.523c-.557 0-1.009.448-1.009 1v1.5m0 0V18m0-2.5h2.523"})]})})}function pi(){return t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 20 20",children:t.jsx("path",{fill:"currentColor",d:"M6.5 3a.75.75 0 0 1 .697.471l3 7.5a.75.75 0 0 1-1.393.557L7.992 9.5H5.008l-.811 2.028a.75.75 0 0 1-1.393-.556l3-7.5A.75.75 0 0 1 6.5 3m0 2.77L5.608 8h1.784zm8.28-1.55a.75.75 0 1 0-1.06 1.06l.72.72h-3.69a.75.75 0 0 0 0 1.5h3.69l-.72.72a.75.75 0 0 0 1.06 1.06l2-2a.75.75 0 0 0 0-1.06zm0 7.5a.75.75 0 1 0-1.06 1.06l.72.72H3.75a.75.75 0 0 0 0 1.5h10.69l-.72.72a.75.75 0 1 0 1.06 1.06l2-2a.75.75 0 0 0 0-1.06z"})})}function wi(){return t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 20 20",children:t.jsx("path",{fill:"currentColor",d:"M13.5 3a.75.75 0 0 0-.697.471l-3 7.5a.75.75 0 0 0 1.393.557l.812-2.028h2.984l.811 2.028a.75.75 0 0 0 1.393-.556l-3-7.5A.75.75 0 0 0 13.5 3m0 2.77L14.392 8h-1.784zM5.22 4.22a.75.75 0 0 1 1.06 1.06L5.56 6h3.69a.75.75 0 0 1 0 1.5H5.56l.72.72a.75.75 0 0 1-1.06 1.06l-2-2a.75.75 0 0 1 0-1.06zm0 7.5a.75.75 0 0 1 1.06 1.06l-.72.72h10.69a.75.75 0 0 1 0 1.5H5.56l.72.72a.75.75 0 1 1-1.06 1.06l-2-2a.75.75 0 0 1 0-1.06z"})})}function vi(){return t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:t.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"m3 21l7.548-7.548M21 3l-7.548 7.548m0 0L8 3H3l7.548 10.452m2.904-2.904L21 21h-5l-5.452-7.548",color:"currentColor"})})}function bi(){return t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",width:"1em",height:"1em",viewBox:"0 0 24 24",children:t.jsx("path",{fill:"currentColor",d:"M14 2H6a2 2 0 0 0-2 2v16c0 1.11.89 2 2 2h12c1.11 0 2-.89 2-2V8zm4 18H6V4h7v5h5zm-.65-10l-2.1 9h-1.4l-1.8-6.79l-1.8 6.79h-1.4l-2.2-9h1.5l1.4 6.81l1.8-6.81h1.3l1.8 6.81l1.4-6.81z"})})}const ct={Bold:b.Bold,LoaderCircle:b.LoaderCircle,Italic:b.Italic,Underline:b.Underline,Quote:b.Quote,TextQuote:oi,Strikethrough:b.Strikethrough,Minus:b.Minus,Eraser:b.Eraser,PaintRoller:b.PaintRoller,Redo2:b.Redo2,Undo2:b.Undo2,AlignCenter:Ae.TextAlignCenterIcon,AlignJustify:Ae.TextAlignJustifyIcon,AlignLeft:Ae.TextAlignLeftIcon,AlignRight:Ae.TextAlignRightIcon,ChevronDown:b.ChevronDown,Subscript:b.Subscript,Superscript:b.Superscript,Code:b.Code,Code2:b.CodeXml,Type:b.Type,IndentIncrease:b.IndentIncrease,IndentDecrease:b.IndentDecrease,List:b.List,ListOrdered:b.ListOrdered,ListTodo:b.ListTodo,Link:b.Link,ImageUp:b.ImageUp,Video:b.Video,Maximize:b.Maximize,Minimize:b.Minimize,Table:b.Table,Sparkles:b.Sparkles,Pencil:b.Pencil,Unlink:b.Unlink,BetweenHorizonalEnd:b.BetweenHorizonalEnd,BetweenHorizonalStart:b.BetweenHorizonalStart,BetweenVerticalStart:b.BetweenVerticalStart,BetweenVerticalEnd:b.BetweenVerticalEnd,TableCellsMerge:b.TableCellsMerge,TableCellsSplit:b.TableCellsSplit,Trash2:b.Trash2,Trash:b.Trash,Replace:b.Replace,ChevronsUpDown:b.ChevronsUpDown,LineHeight:li,Word:ai,Heading1:b.Heading1,Heading2:b.Heading2,Heading3:b.Heading3,Heading4:b.Heading4,Heading5:b.Heading5,Heading6:b.Heading6,Columns2:b.Columns2,Columns3:b.Columns3,Columns4:b.Columns4,Plus:b.Plus,Grip:b.GripVertical,Copy:b.Copy,Clipboard:b.Clipboard,PanelLeft:b.PanelLeft,PanelRight:b.PanelRight,Columns:b.Columns2,Iframe:b.Frame,MenuDown:en,SizeS:ui,SizeM:hi,SizeL:di,AspectRatio:ri,Emoji:b.SmilePlus,DeleteColumn:si,DeleteRow:ci,SearchAndReplace:b.Replace,EmojiIcon:b.SmilePlusIcon,ExportPdf:tn,ExportWord:nn,ImportWord:bi,ColumnAddLeft:xi,ColumnAddRight:mi,BookMarked:b.BookMarked,ZoomIn:b.ZoomIn,ZoomOut:b.ZoomOut,Settings:b.Settings,Eye:b.Eye,TextDirection:fi,LeftToRight:pi,RightToLeft:wi,Attachment:b.Paperclip,GifIcon:gi,ChevronUp:b.ChevronUp,Crop:b.CropIcon,Twitter:vi,FlipX:b.FlipVertical,FlipY:b.FlipHorizontal,PencilRuler:b.PencilRuler,WrapText:b.WrapText};function ji({fill:e}){return t.jsx("svg",{width:"18px",height:"18px",viewBox:"0 0 256 256",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("g",{id:"icon/填充色",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd",children:t.jsxs("g",{id:"icon/背景颜色",children:[t.jsx("g",{id:"编组",fill:"currentColor",children:t.jsxs("g",{transform:"translate(119.502295, 137.878331) rotate(-135.000000) translate(-119.502295, -137.878331) translate(48.002295, 31.757731)",id:"矩形",children:[t.jsx("path",{d:"M100.946943,60.8084699 L43.7469427,60.8084699 C37.2852111,60.8084699 32.0469427,66.0467383 32.0469427,72.5084699 L32.0469427,118.70847 C32.0469427,125.170201 37.2852111,130.40847 43.7469427,130.40847 L100.946943,130.40847 C107.408674,130.40847 112.646943,125.170201 112.646943,118.70847 L112.646943,72.5084699 C112.646943,66.0467383 107.408674,60.8084699 100.946943,60.8084699 Z M93.646,79.808 L93.646,111.408 L51.046,111.408 L51.046,79.808 L93.646,79.808 Z",fillRule:"nonzero"}),t.jsx("path",{d:"M87.9366521,16.90916 L87.9194966,68.2000001 C87.9183543,69.4147389 86.9334998,70.399264 85.7187607,70.4 L56.9423078,70.4 C55.7272813,70.4 54.7423078,69.4150264 54.7423078,68.2 L54.7423078,39.4621057 C54.7423078,37.2523513 55.5736632,35.1234748 57.0711706,33.4985176 L76.4832996,12.4342613 C78.9534987,9.75382857 83.1289108,9.5834005 85.8093436,12.0535996 C87.1658473,13.303709 87.9372691,15.0644715 87.9366521,16.90916 Z",fillRule:"evenodd"}),t.jsx("path",{d:"M131.3,111.241199 L11.7,111.241199 C5.23826843,111.241199 0,116.479467 0,122.941199 L0,200.541199 C0,207.002931 5.23826843,212.241199 11.7,212.241199 L131.3,212.241199 C137.761732,212.241199 143,207.002931 143,200.541199 L143,122.941199 C143,116.479467 137.761732,111.241199 131.3,111.241199 Z M124,130.241 L124,193.241 L19,193.241 L19,130.241 L124,130.241 Z",fillRule:"nonzero"})]})}),t.jsx("path",{d:"M51,218 L205,218 C211.075132,218 216,222.924868 216,229 C216,235.075132 211.075132,240 205,240 L51,240 C44.9248678,240 40,235.075132 40,229 C40,222.924868 44.9248678,218 51,218 Z",id:"矩形",fill:e||"#FBDE28"})]})})})}function rn(e){const[n,i]=d.useState(void 0);function r(c){var l;(l=e.action)==null||l.call(e,c)}function o(){var c;(c=e.action)==null||c.call(e,n)}const s=d.useCallback(R.debounce(c=>{i(c)},350),[]);return t.jsxs("div",{className:"richtext-flex richtext-items-center richtext-h-[32px]",children:[t.jsx(_,{tooltip:e==null?void 0:e.tooltip,disabled:e==null?void 0:e.disabled,action:o,tooltipOptions:e==null?void 0:e.tooltipOptions,shortcutKeys:e==null?void 0:e.shortcutKeys,children:t.jsx("span",{className:"richtext-flex richtext-items-center richtext-justify-center richtext-text-sm",children:t.jsx(ji,{fill:n})})}),t.jsx(fn,{selectedColor:n,setSelectedColor:s,onChange:r,highlight:!0,disabled:e==null?void 0:e.disabled,children:t.jsx(G,{variant:"ghost",size:"icon",className:"!richtext-w-3 !richtext-h-[32px]",disabled:e==null?void 0:e.disabled,children:t.jsx(U,{className:"!richtext-w-3 !richtext-h-3 richtext-text-zinc-500",name:"MenuDown"})})})]})}function on(e){const{t:n}=A.useLocale(),[i,r]=d.useState({text:"",link:""}),[o,s]=d.useState(!1);d.useEffect(()=>{var l;if(e!=null&&e.editor){const{href:a,target:h}=(l=e.editor)==null?void 0:l.getAttributes("link"),{from:u,to:x}=e.editor.state.selection,m=e.editor.state.doc.textBetween(u,x," ");r({link:a,text:m}),s(h==="_blank")}},[e==null?void 0:e.editor]);function c(l){l.preventDefault(),l.stopPropagation(),e==null||e.onSetLink(i.link,i.text,o)}return t.jsx("div",{className:"border-neutral-200 richtext-rounded-lg !richtext-border richtext-bg-white richtext-p-2 richtext-shadow-sm dark:richtext-border-neutral-800 dark:richtext-bg-black",children:t.jsxs("form",{className:"richtext-flex richtext-flex-col richtext-gap-2",onSubmit:c,children:[t.jsx(ne,{className:"mb-[6px]",children:n("editor.link.dialog.text")}),t.jsx("div",{className:"richtext-mb-[10px] richtext-flex richtext-w-full richtext-max-w-sm richtext-items-center richtext-gap-1.5",children:t.jsx("div",{className:"richtext-relative richtext-w-full richtext-max-w-sm richtext-items-center",children:t.jsx(Z,{className:"richtext-w-80",onChange:l=>r({...i,text:l.target.value}),placeholder:"Text",required:!0,type:"text",value:i.text})})}),t.jsx(ne,{className:"mb-[6px]",children:n("editor.link.dialog.link")}),t.jsx("div",{className:"richtext-flex richtext-w-full richtext-max-w-sm richtext-items-center richtext-gap-1.5",children:t.jsxs("div",{className:"richtext-relative richtext-w-full richtext-max-w-sm richtext-items-center",children:[t.jsx(Z,{className:"richtext-pl-10",onChange:l=>r({...i,link:l.target.value}),required:!0,type:"url",value:i.link}),t.jsx("span",{className:"richtext-absolute richtext-inset-y-0 richtext-start-0 richtext-flex richtext-items-center richtext-justify-center richtext-px-2",children:t.jsx(U,{className:"richtext-size-5 richtext-text-muted-foreground",name:"Link"})})]})}),t.jsxs("div",{className:"richtext-flex richtext-items-center richtext-space-x-2",children:[t.jsx(ne,{children:n("editor.link.dialog.openInNewTab")}),t.jsx(nt,{checked:o,onCheckedChange:l=>{s(l)}})]}),t.jsx(G,{className:"richtext-mt-2 richtext-self-end",type:"submit",children:n("editor.link.dialog.button.apply")})]})})}function Ci(e,n,i=null){return i?e.createChecked({index:n},i):e.createAndFill({index:n})}function yi(e){if(e.cached.columnsNodeTypes)return e.cached.columnsNodeTypes;const n={columns:e.nodes.columns,column:e.nodes.column};return e.cached.columnsNodeTypes=n,n}function Ti(e,n,i=null){const r=yi(e),o=[];for(let s=0;s<n;s+=1){const c=Ci(r.column,s,i);c&&o.push(c)}return r.columns.createChecked({cols:n},o)}function qe({state:e,dispatch:n,type:i}){const r=z.findParentNode(s=>s.type.name===ye.name)(e.selection),o=z.findParentNode(s=>s.type.name===at.name)(e.selection);if(n&&r&&o){const s=r.node,c=o.node.attrs.index,l=s.toJSON();let a=c;i==="delete"?(a=c-1,l.content.splice(c,1)):(a=i==="addBefore"?c:c+1,l.content.splice(a,0,{type:"column",attrs:{index:c},content:[{type:"paragraph"}]})),l.attrs.cols=l.content.length,l.content.forEach((m,f)=>{m.attrs.index=f});const h=R.Node.fromJSON(e.schema,l);let u=r.pos;h.content.forEach((m,f,w)=>{w<a&&(u+=m.nodeSize)});const x=e.tr.setTime(Date.now());x.replaceWith(r.pos,r.pos+r.node.nodeSize,h).setSelection(R.TextSelection.near(x.doc.resolve(u))),n(x)}return!0}function yt({state:e,dispatch:n,type:i}){const r=z.findParentNode(s=>s.type.name===ye.name)(e.selection),o=z.findParentNode(s=>s.type.name===at.name)(e.selection);if(n&&r&&o){const s=r.node,c=o.node.attrs.index;let l=0;i==="before"?l=(c-1+s.attrs.cols)%s.attrs.cols:l=(c+1)%s.attrs.cols;let a=r.pos;s.content.forEach((u,x,m)=>{m<l&&(a+=u.nodeSize)});const h=e.tr.setTime(Date.now());return h.setSelection(R.TextSelection.near(h.doc.resolve(a))),n(h),!0}return!1}const Ni=200,ye=z.Node.create({name:"columns",group:"block",defining:!0,isolating:!0,allowGapCursor:!1,content:"column{1,}",priority:Ni,addOptions(){return{HTMLAttributes:{class:"columns"}}},addAttributes(){return{cols:{default:2,parseHTML:e=>e.getAttribute("cols")}}},parseHTML(){return[{tag:"div[class=grid]"}]},renderHTML({HTMLAttributes:e}){return["div",z.mergeAttributes(this.options.HTMLAttributes,e),0]},addCommands(){return{insertColumns:e=>({tr:n,dispatch:i,editor:r})=>{const o=Ti(r.schema,e&&e.cols||3);if(i){const s=n.selection.anchor+1;n.replaceSelectionWith(o).scrollIntoView().setSelection(R.TextSelection.near(n.doc.resolve(s)))}return!0},addColBefore:()=>({dispatch:e,state:n})=>qe({dispatch:e,state:n,type:"addBefore"}),addColAfter:()=>({dispatch:e,state:n})=>qe({dispatch:e,state:n,type:"addAfter"}),deleteCol:()=>({dispatch:e,state:n})=>qe({dispatch:e,state:n,type:"delete"})}},addKeyboardShortcuts(){return{"Mod-Alt-G":()=>this.editor.commands.insertColumns(),Tab:()=>yt({state:this.editor.state,dispatch:this.editor.view.dispatch,type:"after"}),"Shift-Tab":()=>yt({state:this.editor.state,dispatch:this.editor.view.dispatch,type:"before"})}}}),at=z.Node.create({name:"column",content:"block+",isolating:!0,addOptions(){return{HTMLAttributes:{class:"column"}}},addAttributes(){return{index:{default:0,parseHTML:e=>e.getAttribute("index")}}},parseHTML(){return[{tag:"div[class=column]"}]},renderHTML({HTMLAttributes:e}){return["div",z.mergeAttributes(this.options.HTMLAttributes,e),0]}});var De=(e=>(e[e.max=7]="max",e[e.min=0]="min",e[e.more=1]="more",e[e.less=-1]="less",e))(De||{});function Si(e,n,i){return e<n?n:e>i?i:e}function ki(e,n,i,r){const{doc:o,selection:s}=e;if(!o||!s||!(s instanceof R.TextSelection||s instanceof R.AllSelection))return e;const{from:c,to:l}=s;return o.nodesBetween(c,l,(a,h)=>{const u=a.type;return i.includes(u.name)?(e=Ye(e,h,n),!1):!z.isList(a.type.name,r.extensionManager.extensions)}),e}function Ye(e,n,i){if(!e.doc)return e;const r=e.doc.nodeAt(n);if(!r)return e;const c=Si((r.attrs.indent||0)+i,0,7);if(c===r.attrs.indent)return e;const l={...r.attrs,indent:c};return e.setNodeMarkup(n,r.type,l,r.marks)}function Ai({delta:e,types:n}){return({state:i,dispatch:r,editor:o})=>{const{selection:s}=i;let{tr:c}=i;return c=c.setSelection(s),c=ki(c,e,n,o),c.docChanged?(r&&r(c),!0):!1}}function He(e){function n(){const s=d.useRef(e),c=d.useCallback(()=>s.current,[]),l=d.useRef(new Set),a=d.useCallback(u=>{s.current={...s.current,...u},l.current.forEach(x=>x())},[]),h=d.useCallback(u=>(l.current.add(u),()=>l.current.delete(u)),[]);return{get:c,set:a,subscribe:h}}const i=d.createContext(null);function r({children:s}){return t.jsx(i.Provider,{value:n(),children:s})}function o(s){const c=d.useContext(i);if(!c)throw new Error("Store not found");return[d.useSyncExternalStore(c.subscribe,()=>s(c.get()),()=>s(e)),c.set]}return{Provider:r,useStore:o}}He({value:!1});He({value:!1});const{Provider:Mi,useStore:sn}=He({value:!1}),{Provider:Ei,useStore:Li}=He({value:"light"});R.d("0");function Te(e,n){return window.addEventListener(e,n),()=>{window.removeEventListener(e,n)}}function Be(e,n){window.dispatchEvent(new CustomEvent(e,{detail:n}))}const re={UPLOAD_IMAGE:e=>`UPLOAD_IMAGE-${e}`,UPLOAD_VIDEO:e=>`UPLOAD_VIDEO-${e}`,EDIT:e=>`EDIT-${e}`,UPDATE_THEME:e=>`UPDATE_THEME-${e}`,SEARCH_REPLCE:"SEARCH_REPLACE"},cn={setOpen:(e,n)=>{Be(re.UPLOAD_IMAGE(e),n)}},fe=K.Root,ge=K.Trigger,Ii=K.Portal,an=V.forwardRef(({className:e,...n},i)=>t.jsx(K.Overlay,{ref:i,className:k("richtext-fixed richtext-inset-0 richtext-z-50 richtext-bg-black/80 richtext- data-[state=open]:richtext-animate-in data-[state=closed]:richtext-animate-out data-[state=closed]:richtext-fade-out-0 data-[state=open]:richtext-fade-in-0",e),...n}));an.displayName=K.Overlay.displayName;const ae=V.forwardRef(({className:e,children:n,...i},r)=>t.jsxs(Ii,{children:[t.jsx(an,{}),t.jsxs(K.Content,{ref:r,className:k("richtext-dialog-content richtext-fixed richtext-left-[50%] richtext-top-[50%] richtext-z-50 richtext-grid richtext-w-full richtext-max-w-lg richtext-translate-x-[-50%] richtext-translate-y-[-50%] richtext-gap-4 richtext-border richtext-bg-background richtext-p-6 richtext-shadow-lg richtext-duration-200 data-[state=open]:richtext-animate-in data-[state=closed]:richtext-animate-out data-[state=closed]:richtext-fade-out-0 data-[state=open]:richtext-fade-in-0 data-[state=closed]:richtext-zoom-out-95 data-[state=open]:richtext-zoom-in-95 data-[state=closed]:richtext-slide-out-to-left-1/2 data-[state=closed]:richtext-slide-out-to-top-[48%] data-[state=open]:richtext-slide-in-from-left-1/2 data-[state=open]:richtext-slide-in-from-top-[48%] sm:richtext-rounded-lg",e),...i,children:[n,t.jsxs(K.Close,{className:"richtext-absolute richtext-right-4 richtext-top-4 richtext-rounded-sm richtext-opacity-70 richtext-ring-offset-background richtext-transition-opacity hover:richtext-opacity-100 focus:richtext-outline-none focus:richtext-ring-2 focus:richtext-ring-ring focus:richtext-ring-offset-2 disabled:richtext-pointer-events-none data-[state=open]:richtext-bg-accent data-[state=open]:richtext-text-muted-foreground",children:[t.jsx(b.X,{className:"richtext-h-4 richtext-w-4"}),t.jsx("span",{className:"richtext-sr-only",children:"Close"})]})]})]}));ae.displayName=K.Content.displayName;function ln({className:e,...n}){return t.jsx("div",{className:k("richtext-flex richtext-flex-col richtext-space-y-1.5 richtext-text-center sm:richtext-text-left",e),...n})}ln.displayName="DialogHeader";function Se({className:e,...n}){return t.jsx("div",{className:k("richtext-flex richtext-flex-col-reverse sm:richtext-flex-row sm:richtext-justify-end sm:richtext-space-x-2",e),...n})}Se.displayName="DialogFooter";const le=V.forwardRef(({className:e,...n},i)=>t.jsx(K.Title,{ref:i,className:k("richtext-text-lg richtext-font-semibold richtext-leading-none richtext-tracking-tight",e),...n}));le.displayName=K.Title.displayName;const Ri=V.forwardRef(({className:e,...n},i)=>t.jsx(K.Description,{ref:i,className:k("richtext-text-sm richtext-text-muted-foreground",e),...n}));Ri.displayName=K.Description.displayName;function Pi(e){return e.replace(/^.*\/|\..+$/g,"")}function zi(e){return e.split(".").pop()}function Di(e){return e<1024?`${e} Byte`:e<1024*1024?`${(e/1024).toFixed(2)} KB`:`${(e/1024/1024).toFixed(2)} MB`}function _i(e){return e?e==="application/pdf"?"pdf":e.startsWith("application/")&&[".document","word"].some(n=>e.includes(n))?"word":e.startsWith("application/")&&["presentation"].some(n=>e.includes(n))?"excel":e.startsWith("application/")&&["sheet"].some(n=>e.includes(n))?"ppt":e.startsWith("image")?"image":e.startsWith("audio")?"audio":e.startsWith("video")?"video":"file":"file"}function Oi(e){return new Promise(n=>{const i=new FileReader;i.addEventListener("load",()=>{n({alt:e.name,src:i.result})},!1),i.readAsDataURL(e)})}function lt(e,n){const i=e.split(","),r=i[0].match(/:(.*?);/)[1],o=atob(i[i.length-1]);let s=o.length;const c=new Uint8Array(s);for(;s--;)c[s]=o.charCodeAt(s);return new File([c],n,{type:r})}function Hi({editor:e,imageInline:n,onClose:i}){const{t:r}=A.useLocale(),[o,s]=d.useState(!1),c=d.useRef(null),[l,a]=d.useState(),[h,u]=d.useState(""),x=d.useRef(null),[m,f]=d.useState({src:"",file:null});function w(j){if(c.current&&j.width&&j.height){const v=p(c.current,j);u(v)}}function p(j,v){const M=document.createElement("canvas"),I=j.naturalWidth/j.width,E=j.naturalHeight/j.height;M.width=v.width*I,M.height=v.height*E;const C=M.getContext("2d");return C&&(C.imageSmoothingEnabled=!1,C.drawImage(j,v.x*I,v.y*E,v.width*I,v.height*E,0,0,v.width*I,v.height*E)),M.toDataURL("image/png",1)}async function g(){var j,v;try{const M=lt(h,((j=m==null?void 0:m.file)==null?void 0:j.name)||"image.png"),I=(v=e.extensionManager.extensions.find(C=>C.name===ue.name))==null?void 0:v.options;let E="";I.upload?E=await I.upload(M):E=URL.createObjectURL(M),e.chain().focus().setImageInline({src:E,inline:n}).run(),s(!1),f({src:"",file:null}),i()}catch(M){console.log("Error cropping image",M)}}function H(j){var v;j.preventDefault(),(v=x.current)==null||v.click()}const N=async j=>{var E;const v=(E=j==null?void 0:j.target)==null?void 0:E.files;if(!e||e.isDestroyed||v.length===0)return;const M=v[0],I=await Oi(M);s(!0),f({src:I.src,file:M})};return t.jsxs(t.Fragment,{children:[t.jsx(G,{className:"richtext-mt-1 richtext-w-full",onClick:H,size:"sm",children:r("editor.image.dialog.tab.uploadCrop")}),t.jsxs(fe,{open:o,children:[t.jsx(ge,{}),t.jsxs(ae,{children:[t.jsx(le,{children:r("editor.image.dialog.tab.uploadCrop")}),t.jsx("div",{children:m.src&&t.jsx(zn,{className:"richtext-w-full",crop:l,onChange:j=>a(j),onComplete:j=>w(j),children:t.jsx("img",{alt:"Crop me",ref:c,src:m.src})})}),t.jsxs(Se,{children:[t.jsxs(G,{onClick:()=>{s(!1),f({src:"",file:null})},children:[r("editor.imageUpload.cancel"),t.jsx(U,{className:"richtext-ml-[4px]",name:"Trash2"})]}),t.jsxs(G,{className:"richtext-w-fit",onClick:g,children:[r("editor.imageUpload.crop"),t.jsx(U,{className:"richtext-ml-[4px]",name:"Crop"})]})]})]})]}),t.jsx("input",{accept:"image/*",multiple:!0,onChange:N,ref:x,type:"file",style:{display:"none"}})]})}function Bi(e){var w;const{t:n}=A.useLocale(),[i,r]=d.useState(!1),o=p=>{r(p.detail)},[s,c]=d.useState(""),l=d.useRef(null),[a,h]=d.useState(((w=e.editor.extensionManager.extensions.find(p=>p.name===ue.name))==null?void 0:w.options.defaultInline)||!1),u=d.useMemo(()=>{var g;return(g=e.editor.extensionManager.extensions.find(H=>H.name===ue.name))==null?void 0:g.options},[e.editor]);d.useEffect(()=>{const p=Te(re.UPLOAD_IMAGE(e.editor.id),o);return()=>{p()}},[]);async function x(p){var j;const g=(j=p==null?void 0:p.target)==null?void 0:j.files;if(!e.editor||e.editor.isDestroyed||g.length===0)return;const H=g[0];let N="";u.upload?N=await u.upload(H):N=URL.createObjectURL(H),e.editor.chain().focus().setImageInline({src:N,inline:a}).run(),r(!1),h(!1)}function m(p){p.preventDefault(),p.stopPropagation(),e.editor.chain().focus().setImageInline({src:s,inline:a}).run(),r(!1),h(!1),c("")}function f(p){var g;p.preventDefault(),(g=l.current)==null||g.click()}return t.jsxs(fe,{onOpenChange:r,open:i,children:[t.jsx(ge,{asChild:!0,children:t.jsx(_,{action:()=>r(!0),icon:e.icon,tooltip:e.tooltip})}),t.jsxs(ae,{children:[t.jsx(le,{children:n("editor.image.dialog.title")}),t.jsxs(Gt,{activationMode:"manual",defaultValue:u.resourceImage==="both"||u.resourceImage==="upload"?"upload":"link",children:[t.jsxs(it,{className:"richtext-grid richtext-w-full richtext-grid-cols-2",children:[u.resourceImage==="both"||u.resourceImage==="upload"?t.jsx(je,{value:"upload",children:n("editor.image.dialog.tab.upload")}):t.jsx(t.Fragment,{}),u.resourceImage==="both"||u.resourceImage==="link"?t.jsx(je,{value:"link",children:n("editor.image.dialog.tab.url")}):t.jsx(t.Fragment,{})]}),t.jsxs("div",{className:"richtext-my-[10px] richtext-flex richtext-items-center richtext-gap-[4px]",children:[t.jsx(Qt,{checked:a,onCheckedChange:p=>{h(p)}}),t.jsx(ne,{children:n("editor.link.dialog.inline")})]}),t.jsxs(Ce,{value:"upload",children:[t.jsxs("div",{className:"richtext-flex richtext-items-center richtext-gap-[10px]",children:[t.jsx(G,{className:"richtext-mt-1 richtext-w-full",onClick:f,size:"sm",children:n("editor.image.dialog.tab.upload")}),t.jsx(Hi,{editor:e.editor,imageInline:a,onClose:()=>cn.setOpen(e.editor.id,!1)})]}),t.jsx("input",{accept:"image/*",multiple:!0,onChange:x,ref:l,type:"file",style:{display:"none"}})]}),t.jsx(Ce,{value:"link",children:t.jsx("form",{onSubmit:m,children:t.jsxs("div",{className:"richtext-flex richtext-items-center richtext-gap-2",children:[t.jsx(Z,{autoFocus:!0,onChange:p=>c(p.target.value),placeholder:n("editor.image.dialog.placeholder"),required:!0,type:"url",value:s}),t.jsx(G,{type:"submit",children:n("editor.image.dialog.button.apply")})]})})})]})]})]})}const Me={TOP_LEFT:"tl",TOP_RIGHT:"tr",BOTTOM_LEFT:"bl",BOTTOM_RIGHT:"br"};function Vi(e){var E,C;const[n,i]=d.useState({width:A.IMAGE_MAX_SIZE,height:A.IMAGE_MAX_SIZE}),[r,o]=d.useState({width:0,height:0}),[s]=d.useState([Me.TOP_LEFT,Me.TOP_RIGHT,Me.BOTTOM_LEFT,Me.BOTTOM_RIGHT]),[c,l]=d.useState(!1),[a,h]=d.useState({x:0,y:0,w:0,h:0,dir:""}),{align:u,inline:x}=(E=e==null?void 0:e.node)==null?void 0:E.attrs,m=d.useMemo(()=>{var ie;const{src:L,alt:T,width:y,height:B,flipX:O,flipY:P}=(ie=e==null?void 0:e.node)==null?void 0:ie.attrs,D=R.isNumber(y)?`${y}px`:y,$=R.isNumber(B)?`${B}px`:B,q=[];O&&q.push("rotateX(180deg)"),P&&q.push("rotateY(180deg)");const X=q.join(" ");return{src:L||void 0,alt:T||void 0,style:{width:D||void 0,height:$||void 0,transform:X||"none"}}},[(C=e==null?void 0:e.node)==null?void 0:C.attrs]),f=d.useMemo(()=>{const{style:{width:L}}=m;return{width:L==="100%"?L:void 0}},[m]);function w(L){o({width:L.target.width,height:L.target.height})}function p(){const{editor:L,getPos:T}=e;L.commands.setNodeSelection(T())}const g=d.useCallback(R.throttle(()=>{const{editor:L}=e,{width:T}=getComputedStyle(L.view.dom);i(y=>({...y,width:Number.parseInt(T,10)}))},A.IMAGE_THROTTLE_WAIT_TIME),[e==null?void 0:e.editor]);function H(L,T){L.preventDefault(),L.stopPropagation();const y=r.width,B=r.height,O=y/B;let P=Number(e.node.attrs.width),D=Number(e.node.attrs.height);const $=n.width;P&&!D?(P=P>$?$:P,D=Math.round(P/O)):D&&!P?(P=Math.round(D*O),P=P>$?$:P):!P&&!D?(P=y>$?$:y,D=Math.round(P/O)):P=P>$?$:P,l(!0),h({x:L.clientX,y:L.clientY,w:P,h:D,dir:T})}const N=d.useCallback(R.throttle(L=>{if(L.preventDefault(),L.stopPropagation(),!c)return;const{x:T,w:y,dir:B}=a,O=(L.clientX-T)*(/l/.test(B)?-1:1),P=R.clamp(y+O,A.IMAGE_MIN_SIZE,n.width);e.updateAttributes({width:P,height:null})},A.IMAGE_THROTTLE_WAIT_TIME),[c,a,n,e.updateAttributes]),j=d.useCallback(L=>{L.preventDefault(),L.stopPropagation(),c&&(h({x:0,y:0,w:0,h:0,dir:""}),l(!1),p())},[c,p]),v=d.useCallback(()=>{document==null||document.addEventListener("mousemove",N,!0),document==null||document.addEventListener("mouseup",j,!0)},[N,j]),M=d.useCallback(()=>{document==null||document.removeEventListener("mousemove",N,!0),document==null||document.removeEventListener("mouseup",j,!0)},[N,j]);d.useEffect(()=>(c?v():M(),()=>{M()}),[c,v,M]);const I=d.useMemo(()=>new ResizeObserver(()=>g()),[g]);return d.useEffect(()=>(I.observe(e.editor.view.dom),()=>{I.disconnect()}),[e.editor.view.dom,I]),t.jsx(z.NodeViewWrapper,{as:x?"span":"div",className:"image-view",style:{...f,textAlign:u,display:x?"inline":"block"},children:t.jsxs("div",{"data-drag-handle":!0,draggable:"true",style:f,className:`image-view__body ${e!=null&&e.selected?"image-view__body--focused":""} ${c?"image-view__body--resizing":""}`,children:[t.jsx("img",{alt:m.alt,className:"image-view__body__image block",height:"auto",onClick:p,onLoad:w,src:m.src,style:m.style}),(e==null?void 0:e.editor.view.editable)&&((e==null?void 0:e.selected)||c)&&t.jsx("div",{className:"image-resizer",children:s==null?void 0:s.map(L=>t.jsx("span",{className:`image-resizer__handler image-resizer__handler--${L}`,onMouseDown:T=>H(T,L)},`image-dir-${L}`))})]})})}const he=new R.PluginKey("upload-image");function $i(){return new R.Plugin({key:he,state:{init(){return R.DecorationSet.empty},apply(e,n){n=n.map(e.mapping,e.doc);const i=e.getMeta(he);if(i!=null&&i.add)for(const{id:r,pos:o,src:s}of i.add){const c=Fi(s),l=R.Decoration.widget(o,c,{id:r});n=n.add(e.doc,[l])}else if(i!=null&&i.remove)for(const r of i.remove)n=n.remove(n.find(void 0,void 0,o=>o.id===r));return n}},props:{decorations(e){return this.getState(e)}}})}function Fi(e){const n=document.createElement("div"),i=document.createElement("img");return i.setAttribute("class","opacity-50"),i.src=e,i.addEventListener("load",()=>{n.setAttribute("class","img-placeholder")}),n.append(i),n}function Wi(e,n){var o;const r=he.getState(e).find(void 0,void 0,s=>s.id===n);return r.length>0?(o=r[0])==null?void 0:o.from:null}function qi({validateFn:e,onUpload:n,postUpload:i,defaultInline:r=!1}){return(o,s,c)=>{for(const l of o){if(e&&!e(l))continue;const a=Date.now().toString(),h=s.state.tr;h.selection.empty||h.deleteSelection();const u=URL.createObjectURL(l);h.setMeta(he,{add:[{id:a,pos:c,src:u}]}),s.dispatch(h),n(l).then(async x=>{var N;i&&typeof x=="string"&&(x=await i(x));const{schema:m}=s.state;let f=Wi(s.state,a);if(f===null)return;const w=typeof x=="object"?u:x,p=(N=m.nodes.image)==null?void 0:N.create({src:w,inline:r});if(!p)return;const{doc:g}=s.state;f>g.content.size&&(f=g.content.size-1);const H=s.state.tr.replaceWith(f,f,p).setMeta(he,{remove:[a]});s.dispatch(H)},()=>{const x=s.state.tr.delete(c,c).setMeta(he,{remove:[a]});s.dispatch(x)})}}}function Gi(e,n,i){var o;const r=[...((o=n.clipboardData)==null?void 0:o.files)||[]];if(r.length>0){n.preventDefault();const s=e.state.selection.from;return i(r,e,s+1),!0}return!1}function Ui(e,n,i,r){var s;const o=[...((s=n.dataTransfer)==null?void 0:s.files)||[]];if(!i&&o.length>0){n.preventDefault();const c=e.posAtCoords({left:n.clientX,top:n.clientY});if(c)return r(o,e,c.pos+1),!0}return!1}const Xi={acceptMimes:["image/jpeg","image/gif","image/png","image/jpg"],maxSize:1024*1024*5,resourceImage:"both",defaultInline:!1},ue=z.Image.extend({group:"inline",inline:!0,defining:!0,draggable:!0,selectable:!0,addOptions(){var e;return{...Xi,...(e=this.parent)==null?void 0:e.call(this),upload:()=>Promise.reject("Image Upload Function"),button:({editor:n,extension:i,t:r})=>{var o,s;return{component:Bi,componentProps:{action:()=>!0,upload:i.options.upload,disabled:!((s=(o=n.can()).setImage)!=null&&s.call(o,{})),icon:"ImageUp",tooltip:r("editor.image.tooltip"),editor:n}}}}},addAttributes(){var e;return{...(e=this.parent)==null?void 0:e.call(this),flipX:{default:!1},flipY:{default:!1},width:{default:null,parseHTML:n=>{const i=n.style.width||n.getAttribute("width")||null;return i?Number.parseInt(i,10):null},renderHTML:n=>({width:n.width})},align:{default:"center",parseHTML:n=>n.getAttribute("align"),renderHTML:n=>({align:n.align})},inline:{default:!1,parseHTML:n=>!!n.getAttribute("inline"),renderHTML:n=>({inline:n.inline})}}},addNodeView(){return z.ReactNodeViewRenderer(Vi)},addCommands(){var e;return{...(e=this.parent)==null?void 0:e.call(this),setImageInline:n=>({commands:i})=>i.insertContent({type:this.name,attrs:{...n,inline:n.inline??this.options.defaultInline}}),updateImage:n=>({commands:i})=>i.updateAttributes(this.name,n),setAlignImage:n=>({commands:i})=>i.updateAttributes(this.name,{align:n})}},renderHTML({HTMLAttributes:e}){const{flipX:n,flipY:i,align:r,inline:o}=e,s=n||i?`transform: rotateX(${n?"180":"0"}deg) rotateY(${i?"180":"0"}deg);`:"",c=r?`text-align: ${r};`:"";return[o?"span":"div",{style:c,class:"image"},["img",z.mergeAttributes({height:"auto",style:s},this.options.HTMLAttributes,e)]]},parseHTML(){return[{tag:"span.image img",getAttrs:e=>{var s;const n=e==null?void 0:e.parentElement,i=e==null?void 0:e.getAttribute("width"),r=(e==null?void 0:e.getAttribute("flipx"))||!1,o=(e==null?void 0:e.getAttribute("flipy"))||!1;return{src:e==null?void 0:e.getAttribute("src"),alt:e==null?void 0:e.getAttribute("alt"),caption:e==null?void 0:e.getAttribute("caption"),width:i?Number.parseInt(i,10):null,align:(e==null?void 0:e.getAttribute("align"))||((s=n==null?void 0:n.style)==null?void 0:s.textAlign)||null,inline:(e==null?void 0:e.getAttribute("inline"))||!1,flipX:r==="true",flipY:o==="true"}}},{tag:"div[class=image]",getAttrs:e=>{const n=e.querySelector("img"),i=n==null?void 0:n.getAttribute("width"),r=(n==null?void 0:n.getAttribute("flipx"))||!1,o=(n==null?void 0:n.getAttribute("flipy"))||!1;return{src:n==null?void 0:n.getAttribute("src"),alt:n==null?void 0:n.getAttribute("alt"),caption:n==null?void 0:n.getAttribute("caption"),width:i?Number.parseInt(i,10):null,align:(n==null?void 0:n.getAttribute("align"))||e.style.textAlign||null,inline:(n==null?void 0:n.getAttribute("inline"))||!1,flipX:r==="true",flipY:o==="true"}}}]},addProseMirrorPlugins(){const n=qi({validateFn:i=>!(!this.options.acceptMimes.includes(i.type)||i.size>this.options.maxSize),onUpload:this.options.upload,defaultInline:this.options.defaultInline});return[new R.Plugin({props:{handlePaste:(i,r)=>!r.clipboardData||[...r.clipboardData.files||[]].some(s=>s.type==="text/html")?!1:Gi(i,r,n),handleDrop:(i,r,o,s)=>(!(r instanceof DragEvent)||!r.dataTransfer||Ui(i,r,s,n),!1)}}),$i()]}});function Zi(e){return/\.(?:mp4|webm|ogg|mov)$/i.test(e)}function Yi(e){const{t:n}=A.useLocale(),[i,r]=d.useState(""),o=d.useRef(null),[s,c]=d.useState(""),[l,a]=d.useState(!1),h=w=>{a(w.detail)};d.useEffect(()=>{const w=Te(re.UPLOAD_VIDEO(e.editor.id),h);return()=>{w()}},[]);const u=d.useMemo(()=>{var p;return(p=e.editor.extensionManager.extensions.find(g=>g.name===dt.name))==null?void 0:p.options},[e.editor]);async function x(w){var N;const p=(N=w==null?void 0:w.target)==null?void 0:N.files;if(!e.editor||e.editor.isDestroyed||p.length===0)return;const g=p[0];let H="";u.upload?H=await u.upload(g):H=URL.createObjectURL(g),e.editor.chain().focus().setVideo({src:H,width:"100%"}).run(),a(!1)}function m(w){w.preventDefault(),w.stopPropagation(),i&&(e.editor.chain().focus().setVideo({src:i,width:"100%"}).run(),a(!1))}function f(w){var p;w.preventDefault(),(p=o.current)==null||p.click()}return t.jsxs(fe,{onOpenChange:a,open:l,children:[t.jsx(ge,{asChild:!0,children:t.jsx(_,{action:()=>a(!0),icon:e.icon,tooltip:e.tooltip})}),t.jsxs(ae,{children:[t.jsx(le,{children:n("editor.video.dialog.title")}),t.jsxs(Gt,{activationMode:"manual",defaultValue:(u==null?void 0:u.resourceVideo)==="both"||(u==null?void 0:u.resourceVideo)==="upload"?"upload":"link",children:[t.jsxs(it,{className:"richtext-grid richtext-w-full richtext-grid-cols-2",children:[((u==null?void 0:u.resourceVideo)==="both"||(u==null?void 0:u.resourceVideo)==="upload")&&t.jsx(je,{value:"upload",children:n("editor.video.dialog.tab.upload")}),((u==null?void 0:u.resourceVideo)==="both"||(u==null?void 0:u.resourceVideo)==="link")&&t.jsx(je,{value:"link",children:n("editor.video.dialog.link")})]}),t.jsxs(Ce,{value:"upload",children:[t.jsx("div",{className:"richtext-flex richtext-items-center richtext-gap-[10px]",children:t.jsx(G,{className:"richtext-mt-1 richtext-w-full",onClick:f,size:"sm",children:n("editor.video.dialog.tab.upload")})}),t.jsx("input",{accept:"video/*",multiple:!0,onChange:x,ref:o,type:"file",style:{display:"none"}})]}),t.jsxs(Ce,{value:"link",children:[t.jsx("form",{onSubmit:m,children:t.jsxs("div",{className:"richtext-flex richtext-items-center richtext-gap-2",children:[t.jsx(Z,{autoFocus:!0,placeholder:n("editor.video.dialog.placeholder"),required:!0,type:"url",value:i,onChange:w=>{const p=w.target.value;if(!Zi(p)){c("Invalid video URL"),r("");return}c(""),r(p)}}),t.jsx(G,{type:"submit",children:n("editor.video.dialog.button.apply")})]})}),s&&t.jsx("div",{className:"richtext-my-[5px] richtext-text-red-500",children:s})]})]})]})]})}function Ki(e){return e=e.replace("https://youtu.be/","https://www.youtube.com/watch?v=").replace("watch?v=","embed/"),e=e.replace("https://vimeo.com/","https://player.vimeo.com/video/"),/^https?:\/\/www.bilibili.com\/video\/.*/i.test(e)&&(e=e.replace(/\?.*$/,"").replace("https://www.bilibili.com/video/","https://player.bilibili.com/player.html?bvid=")),e.includes("drive.google.com")&&(e=e.replace("/view","/preview")),e}const dt=z.Node.create({name:"video",group:"block",atom:!0,draggable:!0,addOptions(){return{divider:!1,spacer:!1,allowFullscreen:!0,upload:void 0,frameborder:!1,resourceVideo:"both",width:A.VIDEO_SIZE["size-medium"],HTMLAttributes:{class:"iframe-wrapper",style:"display: flex;justify-content: center;"},button:({editor:e,t:n})=>{var i,r;return{component:Yi,componentProps:{action:()=>{},isActive:()=>e.isActive("video")||!1,disabled:!((r=(i=e.can()).setVideo)!=null&&r.call(i,{})),icon:"Video",tooltip:n("editor.video.tooltip"),editor:e}}}}},addAttributes(){return{src:{default:null,renderHTML:({src:e})=>({src:e?Ki(e):null})},width:{default:this.options.width,renderHTML:({width:e})=>({width:$n(e)})},frameborder:{default:this.options.frameborder?1:0,parseHTML:()=>this.options.frameborder?1:0},allowfullscreen:{default:this.options.allowFullscreen,parseHTML:()=>this.options.allowFullscreen}}},parseHTML(){return[{tag:"div[data-video] iframe"}]},renderHTML({HTMLAttributes:e}){const{width:n="100%"}=e??{},i={...e,width:"100%",height:"100%"},r=`position: relative;overflow: hidden;display: flex;flex: 1;max-width: ${n};`,o=`flex: 1;padding-bottom: ${9/16*100}%;`,l=["div",{style:r},["div",{style:o}],["iframe",i]];return["div",{...this.options.HTMLAttributes,"data-video":""},l]},addCommands(){return{setVideo:e=>({commands:n})=>n.insertContent({type:this.name,attrs:e}),updateVideo:e=>({commands:n})=>n.updateAttributes(this.name,e)}}});function dn(){const[e]=sn(n=>n.value);return e}const Ji={setDisable:(e,n)=>{Be(re.EDIT(e),n)}},Qi="_wrap_5y04w_1",er="_innerWrap_5y04w_15",Tt={wrap:Qi,innerWrap:er};function tr({editor:e,node:n,updateAttributes:i}){const r=dn(),{url:o,width:s,height:c}=n.attrs,[l,a]=d.useState("");function h(){l&&e.chain().updateAttributes(oe.name,{url:l}).setNodeSelection(e.state.selection.from).focus().run()}const u=d.useCallback(x=>{i({width:x.width,height:x.height})},[i]);return t.jsxs(z.NodeViewWrapper,{children:[!o&&t.jsxs("div",{className:"richtext-mx-auto richtext-my-[12px] richtext-flex richtext-max-w-[600px] richtext-items-center richtext-justify-center richtext-gap-[10px] richtext-rounded-[12px] richtext-border richtext-border-solid richtext-border-[#ccc] richtext-p-[10px]",children:[t.jsx(Z,{autoFocus:!0,className:"richtext-flex-1",onInput:x=>a(x.target.value),placeholder:"Enter link",type:"url",value:l}),t.jsx(G,{className:"richtext-w-[60px]",onClick:h,children:"OK"})]}),o&&t.jsx(Ln.Resizable,{size:{width:Number.parseInt(s),height:Number.parseInt(c)},onResizeStop:(x,m,f,w)=>{u({width:Number.parseInt(s)+w.width,height:Number.parseInt(c)+w.height})},children:t.jsx("div",{className:R.clsx(Tt.wrap,"render-wrapper"),children:t.jsx("div",{className:Tt.innerWrap,style:{pointerEvents:r?"none":"auto"},children:t.jsx("iframe",{className:"richtext-my-[12px] ",src:o})})})})]})}function ze(e,n=!1){return i=>{const r=e.startsWith("data-")?e:`data-${e}`;let o=decodeURIComponent(i.getAttribute(r));if(o==null||typeof o=="string"&&o==="null")try{const l=i.outerHTML.match(/([\S\s])+?="([\S\s])+?"/g);l&&l.length>0&&(o=(l.map(h=>h.trim()).reduce((h,u)=>{const x=u.indexOf("="),m=[u.slice(0,x),u.slice(x+1).slice(1,-1)];return h[m[0]]=m[1],h},{})[e.toLowerCase()]||"").replaceAll("&quot;",'"'))}catch(c){console.error("Error getDatasetAttribute ",c.message,i)}if(n)try{return JSON.parse(o)}catch{return{}}if(o.includes("%")||o.includes("auto"))return o;const s=Number.parseInt(o);return s!==s?o:s}}const oe=z.Node.create({name:"iframe",content:"",marks:"",group:"block",selectable:!0,atom:!0,draggable:!0,addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),HTMLAttributes:{class:"iframe"},button:({editor:n,extension:i,t:r})=>({component:_,componentProps:{action:o=>n.commands.setIframe(o),upload:i.options.upload,disabled:!n.can().setIframe({}),icon:"Iframe",tooltip:r("editor.iframe.tooltip")}})}},addAttributes(){return{width:{default:600,parseHTML:ze("width")},height:{default:300,parseHTML:ze("height")},url:{default:null,parseHTML:ze("url")},defaultShowPicker:{default:!1},frameborder:{default:0},allowfullscreen:{default:this.options.allowFullscreen,parseHTML:()=>this.options.allowFullscreen}}},parseHTML(){return[{tag:"iframe"}]},renderHTML({HTMLAttributes:e}){return["iframe",z.mergeAttributes(this.options.HTMLAttributes,e)]},addCommands(){return{setIframe:e=>({tr:n,commands:i,chain:r})=>{var s,c,l;if(((l=(c=(s=n.selection)==null?void 0:s.node)==null?void 0:c.type)==null?void 0:l.name)==this.name)return i.updateAttributes(this.name,e);const o=e||{url:""};return r().insertContent({type:this.name,attrs:o}).run()}}},addInputRules(){return[z.nodeInputRule({find:/^\$iframe\$$/,type:this.type,getAttributes:()=>({width:"100%"})})]},addNodeView(){return z.ReactNodeViewRenderer(tr)}});function nr({selectImage:e,giphyApiKey:n,children:i}){const[r,o]=d.useState([]),[s]=d.useState(15),c=d.useRef(null),l=(h,u="search")=>{if(!n)return;const m=`${u==="search"?`https://api.giphy.com/v1/gifs/search?q=${h}`:`https://api.giphy.com/v1/gifs/trending?q=${h}`}&limit=${s}&api_key=${n}`;fetch(m).then(f=>f.json()).then(f=>{o(f.data)}).catch(f=>{console.log(f)})};d.useEffect(()=>{l("","trend")},[]);const a=d.useCallback(R.debounce(h=>{if(!h.target.value){l("","trend");return}l(h.target.value)},350),[]);return t.jsxs(xe,{modal:!0,children:[t.jsx(me,{asChild:!0,children:i}),t.jsx(ce,{align:"start",className:"richtext-size-full richtext-p-2",hideWhenDetached:!0,side:"bottom",children:n?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"richtext-mb-[10px] richtext-w-full",children:t.jsx(Z,{onChange:a,placeholder:"Search GIF",ref:c,type:"text"})}),t.jsx("div",{className:"richtext-max-h-[280px] richtext-overflow-y-auto",children:t.jsx("div",{className:"richtext-grid richtext-grid-cols-2 richtext-gap-1 ",children:r!=null&&r.length?r==null?void 0:r.map(h=>t.jsx("img",{alt:"giphy",className:"richtext-cursor-pointer richtext-text-center",height:h.images.fixed_width_downsampled.height,onClick:()=>e(h),src:h.images.fixed_width_downsampled.url,width:h.images.fixed_width_downsampled.width},`giphy-${h.id}`)):t.jsx("p",{children:"No GIFs found"})})})]}):t.jsx("div",{children:t.jsx("p",{children:"Missing Giphy API Key"})})})]})}function ir({editor:e,icon:n,giphyApiKey:i,...r}){const o=s=>{const{url:c}=s.images.original;e.chain().focus().setImageGif({src:c}).run()};return t.jsx(nr,{giphyApiKey:i,selectImage:o,children:t.jsx(_,{icon:n,tooltip:r==null?void 0:r.tooltip})})}const Ee={TOP_LEFT:"tl",TOP_RIGHT:"tr",BOTTOM_LEFT:"bl",BOTTOM_RIGHT:"br"};function rr(e){var I,E;const[n,i]=d.useState({width:A.IMAGE_MAX_SIZE,height:A.IMAGE_MAX_SIZE}),[r,o]=d.useState({width:0,height:0}),[s]=d.useState([Ee.TOP_LEFT,Ee.TOP_RIGHT,Ee.BOTTOM_LEFT,Ee.BOTTOM_RIGHT]),[c,l]=d.useState(!1),[a,h]=d.useState({x:0,y:0,w:0,h:0,dir:""}),{align:u}=(I=e==null?void 0:e.node)==null?void 0:I.attrs,x=d.useMemo(()=>{var P;const{src:C,alt:L,width:T,height:y}=(P=e==null?void 0:e.node)==null?void 0:P.attrs,B=R.isNumber(T)?`${T}px`:T,O=R.isNumber(y)?`${y}px`:y;return{src:C||void 0,alt:L||void 0,style:{width:B||void 0,height:O||void 0}}},[(E=e==null?void 0:e.node)==null?void 0:E.attrs]),m=d.useMemo(()=>{const{style:{width:C}}=x;return{width:C==="100%"?C:void 0}},[x]);function f(C){o({width:C.target.width,height:C.target.height})}function w(){const{editor:C,getPos:L}=e;C.commands.setNodeSelection(L())}const p=d.useCallback(R.throttle(()=>{const{editor:C}=e,{width:L}=getComputedStyle(C.view.dom);i(T=>({...T,width:Number.parseInt(L,10)}))},A.IMAGE_THROTTLE_WAIT_TIME),[e==null?void 0:e.editor]);function g(C,L){C.preventDefault(),C.stopPropagation();const T=r.width,y=r.height,B=T/y;let O=Number(e.node.attrs.width),P=Number(e.node.attrs.height);const D=n.width;O&&!P?(O=O>D?D:O,P=Math.round(O/B)):P&&!O?(O=Math.round(P*B),O=O>D?D:O):!O&&!P?(O=T>D?D:T,P=Math.round(O/B)):O=O>D?D:O,l(!0),h({x:C.clientX,y:C.clientY,w:O,h:P,dir:L})}const H=d.useCallback(R.throttle(C=>{if(C.preventDefault(),C.stopPropagation(),!c)return;const{x:L,w:T,dir:y}=a,B=(C.clientX-L)*(/l/.test(y)?-1:1),O=R.clamp(T+B,A.IMAGE_MIN_SIZE,n.width);e.updateAttributes({width:O,height:null})},A.IMAGE_THROTTLE_WAIT_TIME),[c,a,n,e.updateAttributes]),N=d.useCallback(C=>{C.preventDefault(),C.stopPropagation(),c&&(h({x:0,y:0,w:0,h:0,dir:""}),l(!1),w())},[c,w]),j=d.useCallback(()=>{document==null||document.addEventListener("mousemove",H,!0),document==null||document.addEventListener("mouseup",N,!0)},[H,N]),v=d.useCallback(()=>{document==null||document.removeEventListener("mousemove",H,!0),document==null||document.removeEventListener("mouseup",N,!0)},[H,N]);d.useEffect(()=>(c?j():v(),()=>{v()}),[c,j,v]);const M=d.useMemo(()=>new ResizeObserver(()=>p()),[p]);return d.useEffect(()=>(M.observe(e.editor.view.dom),()=>{M.disconnect()}),[e.editor.view.dom,M]),t.jsx(z.NodeViewWrapper,{className:"image-view",style:{...m,width:"100%",textAlign:u},children:t.jsxs("div",{"data-drag-handle":!0,draggable:"true",style:m,className:`image-view__body ${e!=null&&e.selected?"image-view__body--focused":""} ${c?"image-view__body--resizing":""}`,children:[t.jsx("img",{alt:x.alt,className:"image-view__body__image block",height:"auto",onClick:w,onLoad:f,src:x.src,style:x.style}),(e==null?void 0:e.editor.view.editable)&&((e==null?void 0:e.selected)||c)&&t.jsx("div",{className:"image-resizer",children:s==null?void 0:s.map(C=>t.jsx("span",{className:`image-resizer__handler image-resizer__handler--${C}`,onMouseDown:L=>g(L,C)},`image-dir-${C}`))})]})})}const ht=z.Image.extend({name:"imageGif",addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),inline:!1,content:"",marks:"",group:"block",GIPHY_API_KEY:"",draggable:!1,selectable:!0,atom:!0,button:({editor:n,extension:i,t:r})=>{var s;const o=((s=i==null?void 0:i.options)==null?void 0:s.GIPHY_API_KEY)||"";return{component:ir,componentProps:{editor:n,action:()=>{},isActive:()=>!1,disabled:!1,icon:"GifIcon",tooltip:r("editor.imageGif.tooltip"),giphyApiKey:o}}}}},addAttributes(){var e;return{...(e=this.parent)==null?void 0:e.call(this),width:{default:null,parseHTML:n=>{const i=n.style.width||n.getAttribute("width")||"10";return i===void 0?null:Number.parseInt(`${i}`,10)},renderHTML:n=>({width:n.width})},align:{default:"center",parseHTML:n=>n.getAttribute("align"),renderHTML:n=>({align:n.align})}}},addNodeView(){return z.ReactNodeViewRenderer(rr)},addCommands(){var e;return{...(e=this.parent)==null?void 0:e.call(this),setImageGif:n=>({commands:i})=>i.insertContent({type:this.name,attrs:n}),updateImageGif:n=>({commands:i})=>i.updateAttributes(this.name,n),setAlignImageGif:n=>({commands:i})=>i.updateAttributes(this.name,{align:n})}},renderHTML({HTMLAttributes:e}){const{align:n}=e;return["div",{style:n?`text-align: ${n};`:"",class:"imageGIf"},["img",z.mergeAttributes({height:"auto"},this.options.HTMLAttributes,e)]]},parseHTML(){return[{tag:"div[class=imageGIf]",getAttrs:e=>{const n=e.querySelector("img"),i=n==null?void 0:n.getAttribute("width");return{src:n==null?void 0:n.getAttribute("src"),alt:n==null?void 0:n.getAttribute("alt"),title:n==null?void 0:n.getAttribute("title"),width:i?Number.parseInt(i,10):null,align:(n==null?void 0:n.getAttribute("align"))||e.style.textAlign||null}}}]}});function or({node:e}){var r;const n=((r=e==null?void 0:e.attrs)==null?void 0:r.src)||"",i=n==null?void 0:n.split("/").pop();return i?t.jsx(z.NodeViewWrapper,{children:t.jsx("div",{"data-twitter":"",children:t.jsx(R.Tweet,{id:i})})}):null}function hn(e){const{t:n}=A.useLocale(),[i,r]=d.useState("");d.useEffect(()=>{var s;if(e!=null&&e.editor){const{src:c}=(s=e.editor)==null?void 0:s.getAttributes(_e.name);c&&r(c)}},[e==null?void 0:e.editor]);function o(s){s.preventDefault(),s.stopPropagation(),e==null||e.onSetLink(i)}return t.jsx("div",{className:"border-neutral-200 richtext-rounded-lg !richtext-border richtext-bg-white richtext-p-2 richtext-shadow-sm dark:richtext-border-neutral-800 dark:richtext-bg-black",children:t.jsxs("form",{className:"richtext-flex richtext-flex-col richtext-gap-2",onSubmit:o,children:[t.jsx(ne,{className:"mb-[6px]",children:n("editor.link.dialog.text")}),t.jsx("div",{className:"richtext-mb-[10px] richtext-flex richtext-w-full richtext-max-w-sm richtext-items-center richtext-gap-1.5",children:t.jsx("div",{className:"richtext-relative richtext-w-full richtext-max-w-sm richtext-items-center",children:t.jsx(Z,{className:"richtext-w-80",onChange:s=>r(s.target.value),placeholder:"Text",required:!0,type:"text",value:i})})}),t.jsx(G,{className:"richtext-mt-2 richtext-self-end",type:"submit",children:n("editor.link.dialog.button.apply")})]})})}function sr(e){function n(i){e.action&&e.action(i)}return t.jsxs(xe,{modal:!0,children:[t.jsx(me,{disabled:e==null?void 0:e.disabled,asChild:!0,children:t.jsx(_,{tooltip:e==null?void 0:e.tooltip,isActive:e==null?void 0:e.isActive,disabled:e==null?void 0:e.disabled,children:t.jsx(U,{name:e==null?void 0:e.icon})})}),t.jsx(ce,{hideWhenDetached:!0,className:"richtext-w-full",align:"start",side:"bottom",children:t.jsx(hn,{editor:e.editor,onSetLink:n})})]})}const cr=/(https?:\/\/)?(www\.)?x\.com\/(\w{1,15})(\/status\/(\d+))?(\/\S*)?/g,ar=/^https?:\/\/(www\.)?x\.com\/(\w{1,15})(\/status\/(\d+))?(\/\S*)?$/;function Nt(e){return e.match(ar)}const _e=z.Node.create({name:"twitter",draggable:!0,selectable:!0,addOptions(){return{addPasteHandler:!0,HTMLAttributes:{},inline:!1,origin:"",button:({editor:e,t:n})=>({component:sr,componentProps:{action:i=>{e.commands.setTweet({src:i})},isActive:()=>!1,disabled:!1,icon:"Twitter",tooltip:n("editor.twitter.tooltip"),editor:e}})}},addNodeView(){return z.ReactNodeViewRenderer(or,{attrs:this.options.HTMLAttributes})},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},addAttributes(){return{src:{default:null}}},parseHTML(){return[{tag:"div[data-twitter]"}]},addCommands(){return{setTweet:e=>({commands:n})=>Nt(e.src)?n.insertContent({type:this.name,attrs:e}):!1,updateTweet:e=>({commands:n})=>Nt(e.src)?n.updateAttributes(this.name,{src:e.src}):!1}},addPasteRules(){return this.options.addPasteHandler?[z.nodePasteRule({find:cr,type:this.type,getAttributes:e=>({src:e.input})})]:[]},renderHTML({HTMLAttributes:e}){return["div",z.mergeAttributes({"data-twitter":""},e)]}}),lr="_wrapper_rraz2_1",dr="_tool_rraz2_17",hr="_active_rraz2_37",ur="_pen_rraz2_41",xr="_line_rraz2_48",mr="_options_rraz2_56",fr="_colorWrap_rraz2_66",gr="_color_rraz2_66",pr="_colorActive_rraz2_83",S={wrapper:lr,tool:dr,active:hr,pen:ur,line:xr,options:mr,colorWrap:fr,color:gr,colorActive:pr};function wr(e){return t.jsx("svg",{height:"1em",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg",...e,children:t.jsx("path",{color:"currentColor",d:"M2 9.2v3.6M12.8 2H9.2M7.5 20H9M20 7.5V9M2.133 4.699c.155-.727.415-1.274.854-1.712c.426-.426.954-.684 1.652-.84m15.228 2.552c-.155-.727-.415-1.274-.854-1.712c-.417-.417-.932-.673-1.608-.83M4.64 19.853c-.698-.156-1.226-.414-1.652-.84c-.43-.43-.69-.965-.845-1.673m11.638 3.626c-1.812.125-3.607-8.326-2.374-9.559s9.684.561 9.559 2.373c-.087 1.187-2.095 1.656-2.037 2.711c.018.309.408.59 1.188 1.154c.543.39 1.096.77 1.629 1.175a.66.66 0 0 1 .234.687a3.35 3.35 0 0 1-2.472 2.473a.66.66 0 0 1-.688-.235c-.404-.533-.784-1.086-1.175-1.628c-.563-.78-.844-1.17-1.153-1.188c-1.055-.059-1.524 1.95-2.71 2.037",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"})})}function vr(e){return t.jsx("svg",{height:"1em",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg",...e,children:t.jsx("path",{d:"M20.06 18a4 4 0 0 1-.2-.89c-.67.7-1.48 1.05-2.41 1.05c-.83 0-1.52-.24-2.05-.71c-.53-.45-.8-1.06-.8-1.79c0-.88.33-1.56 1-2.05s1.61-.73 2.83-.73h1.4v-.64q0-.735-.45-1.17c-.3-.29-.75-.43-1.33-.43c-.52 0-.95.12-1.3.36c-.35.25-.52.54-.52.89h-1.46c0-.43.15-.84.45-1.24c.28-.4.71-.71 1.22-.94c.51-.21 1.06-.35 1.69-.35c.98 0 1.74.24 2.29.73s.84 1.16.86 2.02V16c0 .8.1 1.42.3 1.88V18zm-2.4-1.12c.45 0 .88-.11 1.29-.32c.4-.21.7-.49.88-.83v-1.57H18.7c-1.77 0-2.66.47-2.66 1.41c0 .43.15.73.46.96c.3.23.68.35 1.16.35m-12.2-3.17h4.07L7.5 8.29zM6.64 6h1.72l4.71 12h-1.93l-.97-2.57H4.82L3.86 18H1.93z",fill:"currentColor"})})}function br(e){return t.jsx("svg",{height:"1em",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg",...e,children:t.jsx("path",{d:"M3 21v-4.25L16.2 3.575q.3-.275.663-.425t.762-.15t.775.15t.65.45L20.425 5q.3.275.438.65T21 6.4q0 .4-.137.763t-.438.662L7.25 21zM17.6 7.8L19 6.4L17.6 5l-1.4 1.4z",fill:"currentColor"})})}function jr(e){return t.jsx("svg",{height:"1em",viewBox:"0 0 256 256",width:"1em",xmlns:"http://www.w3.org/2000/svg",...e,children:t.jsx("path",{d:"M253.66 106.34a8 8 0 0 0-11.32 0L192 156.69L107.31 72l50.35-50.34a8 8 0 1 0-11.32-11.32L96 60.69a16 16 0 0 0-2.82 18.81L72 100.69a16 16 0 0 0 0 22.62l4.69 4.69l-58.35 58.34a8 8 0 0 0 3.13 13.25l72 24A7.9 7.9 0 0 0 96 224a8 8 0 0 0 5.66-2.34L136 187.31l4.69 4.69a16 16 0 0 0 22.62 0l21.19-21.18a16 16 0 0 0 18.81-2.82l50.35-50.34a8 8 0 0 0 0-11.32M93.84 206.85l-55-18.35L88 139.31L124.69 176ZM152 180.69L83.31 112L104 91.31L172.69 160Z",fill:"currentColor"})})}function Cr(e){return t.jsxs("svg",{height:"1em",viewBox:"0 0 16 16",width:"1em",xmlns:"http://www.w3.org/2000/svg",...e,children:[t.jsx("path",{d:"m2.648 9.937l7.29-7.288a2.21 2.21 0 0 1 3.124 0l2.29 2.288a2.21 2.21 0 0 1 0 3.126L10.413 13H12.5a.5.5 0 0 1 0 1H4.501a2.2 2.2 0 0 1-1.563-.647l.707-.707c.227.226.535.354.856.354h4.005a1.2 1.2 0 0 0 .848-.354l1.292-1.293l-4-4l-3.29 3.291a1.21 1.21 0 0 0 0 1.712l.29.29l-.708.707l-.29-.29a2.21 2.21 0 0 1 0-3.126M8 6h6.89a1.2 1.2 0 0 0-.246-.356L14 5H9zm2-2h3l-.645-.644a1.21 1.21 0 0 0-1.71 0zm4.89 3H7.708l1 1H14l.644-.644A1.2 1.2 0 0 0 14.891 7zM9.708 9l1.646 1.646L13 9z",fill:"currentColor"}),t.jsx("path",{d:"M14 11.5a.5.5 0 1 1-1 0a.5.5 0 0 1 1 0m1.5-.5a.5.5 0 1 0 0-1a.5.5 0 0 0 0 1m-1 2a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1z",fill:"currentColor"})]})}function yr(e){return t.jsx("svg",{height:"1em",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg",...e,children:t.jsx("path",{d:"M3 3h18v18H3zm2 2v14h14V5z",fill:"currentColor"})})}function Tr(e){return t.jsx("svg",{height:"1em",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg",...e,children:t.jsx("path",{d:"M2 20V4h20v16zm2-2h16V6H4zm0 0V6z",fill:"currentColor"})})}function Nr(e){return t.jsx("svg",{height:"1em",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg",...e,children:t.jsx("path",{d:"M12 22q-2.075 0-3.9-.788t-3.175-2.137T2.788 15.9T2 12t.788-3.9t2.137-3.175T8.1 2.788T12 2t3.9.788t3.175 2.137T21.213 8.1T22 12t-.788 3.9t-2.137 3.175t-3.175 2.138T12 22m0-2q3.35 0 5.675-2.325T20 12t-2.325-5.675T12 4T6.325 6.325T4 12t2.325 5.675T12 20m0-8",fill:"currentColor"})})}function Sr(e){return t.jsx("svg",{height:"1em",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg",...e,children:t.jsx("path",{d:"M10.363 3.591L2.257 17.125a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636-2.87L13.637 3.59a1.914 1.914 0 0 0-3.274 0z",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"})})}function kr(e){return t.jsx("svg",{height:"1em",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg",...e,children:t.jsx("path",{d:"m6.8 21l-5.2-9l5.2-9h10.4l5.2 9l-5.2 9zm1.15-2h8.1l4.025-7l-4.025-7h-8.1L3.9 12zM12 12",fill:"currentColor"})})}function Ar(e){return t.jsx("svg",{height:"1em",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg",...e,children:t.jsxs("g",{fill:"none",fillRule:"evenodd",children:[t.jsx("path",{d:"m12.594 23.258l-.012.002l-.071.035l-.02.004l-.014-.004l-.071-.036q-.016-.004-.024.006l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.016-.018m.264-.113l-.014.002l-.184.093l-.01.01l-.003.011l.018.43l.005.012l.008.008l.201.092q.019.005.029-.008l.004-.014l-.034-.614q-.005-.019-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.003-.011l.018-.43l-.003-.012l-.01-.01z"}),t.jsx("path",{d:"M10.586 2.807a2 2 0 0 1 2.828 0l7.778 7.779a2 2 0 0 1 0 2.828l-7.778 7.778a2 2 0 0 1-2.828 0l-7.778-7.778a2 2 0 0 1 0-2.828zM12 4.222L4.222 12L12 19.778L19.778 12z",fill:"currentColor"})]})})}function Mr(e){return t.jsx("svg",{height:"1em",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg",...e,children:t.jsx("path",{d:"M16.01 11H4v2h12.01v3L20 12l-3.99-4z",fill:"currentColor"})})}function Er(e){return t.jsx("svg",{height:"1em",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg",...e,children:t.jsx("path",{clipRule:"evenodd",d:"M7.53 3.47a.75.75 0 0 1 0 1.06L5.81 6.25H15a5.75 5.75 0 0 1 0 11.5H8a.75.75 0 0 1 0-1.5h7a4.25 4.25 0 0 0 0-8.5H5.81l1.72 1.72a.75.75 0 1 1-1.06 1.06l-3-3a.75.75 0 0 1 0-1.06l3-3a.75.75 0 0 1 1.06 0",fill:"currentColor",fillRule:"evenodd"})})}function Lr(e){return t.jsx("svg",{height:"1em",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg",...e,children:t.jsx("path",{clipRule:"evenodd",d:"M16.47 3.47a.75.75 0 0 1 1.06 0l3 3a.75.75 0 0 1 0 1.06l-3 3a.75.75 0 1 1-1.06-1.06l1.72-1.72H9a4.25 4.25 0 0 0 0 8.5h7a.75.75 0 0 1 0 1.5H9a5.75 5.75 0 0 1 0-11.5h9.19l-1.72-1.72a.75.75 0 0 1 0-1.06",fill:"currentColor",fillRule:"evenodd"})})}function Ir(e){return t.jsx("svg",{height:"1em",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg",...e,children:t.jsx("path",{d:"M7 21q-.825 0-1.412-.587T5 19V6H4V4h5V3h6v1h5v2h-1v13q0 .825-.587 1.413T17 21zm2-4h2V8H9zm4 0h2V8h-2z",fill:"currentColor"})})}function Rr(e){return t.jsx("svg",{height:"1em",viewBox:"0 0 256 256",width:"1em",xmlns:"http://www.w3.org/2000/svg",...e,children:t.jsx("path",{d:"M211.81 83.79a28 28 0 0 1-33.12 4.83l-90.07 90.07a28 28 0 1 1-44.43-6.48a28 28 0 0 1 33.12-4.83l90.07-90.07a28 28 0 1 1 44.43 6.48",fill:"currentColor"})})}function Pr(e){return t.jsx("svg",{height:"1em",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg",...e,children:t.jsx("path",{d:"M12 20.325q-.35 0-.712-.125t-.638-.4l-1.725-1.575q-2.65-2.425-4.788-4.812T2 8.15Q2 5.8 3.575 4.225T7.5 2.65q1.325 0 2.5.562t2 1.538q.825-.975 2-1.537t2.5-.563q2.35 0 3.925 1.575T22 8.15q0 2.875-2.125 5.275T15.05 18.25l-1.7 1.55q-.275.275-.637.4t-.713.125M11.05 6.75q-.725-1.025-1.55-1.563t-2-.537q-1.5 0-2.5 1t-1 2.5q0 1.3.925 2.763t2.213 2.837t2.65 2.575T12 18.3q.85-.775 2.213-1.975t2.65-2.575t2.212-2.837T20 8.15q0-1.5-1-2.5t-2.5-1q-1.175 0-2 .538T12.95 6.75q-.175.25-.425.375T12 7.25t-.525-.125t-.425-.375m.95 4.725",fill:"currentColor"})})}function zr(e){return t.jsx("svg",{height:"1em",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg",...e,children:t.jsx("path",{d:"m7.625 6.4l2.8-3.625q.3-.4.713-.587T12 2t.863.188t.712.587l2.8 3.625l4.25 1.425q.65.2 1.025.738t.375 1.187q0 .3-.088.6t-.287.575l-2.75 3.9l.1 4.1q.025.875-.575 1.475t-1.4.6q-.05 0-.55-.075L12 19.675l-4.475 1.25q-.125.05-.275.063T6.975 21q-.8 0-1.4-.6T5 18.925l.1-4.125l-2.725-3.875q-.2-.275-.288-.575T2 9.75q0-.625.363-1.162t1.012-.763zM8.85 8.125L4 9.725L7.1 14.2L7 18.975l5-1.375l5 1.4l-.1-4.8L20 9.775l-4.85-1.65L12 4zM12 11.5",fill:"currentColor"})})}function Dr(e){return t.jsx("svg",{height:"1em",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg",...e,children:t.jsx("path",{d:"M12.01 6c2.61 0 4.89 1.86 5.4 4.43l.3 1.5l1.52.11c1.56.11 2.78 1.41 2.78 2.96c0 1.65-1.35 3-3 3h-13c-2.21 0-4-1.79-4-4c0-2.05 1.53-3.76 3.56-3.97l1.07-.11l.5-.95A5.46 5.46 0 0 1 12.01 6m0-2C9.12 4 6.6 5.64 5.35 8.04C2.35 8.36.01 10.91.01 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5c0-2.64-2.05-4.78-4.64-4.96C18.68 6.59 15.65 4 12.01 4",fill:"currentColor"})})}function _r(e){return t.jsx("svg",{height:"1em",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg",...e,children:t.jsx("path",{d:"M5.586 6.45A2 2 0 0 1 7.509 5h11.84a2 2 0 0 1 1.923 2.55l-2.858 10A2 2 0 0 1 16.491 19H4.651a2 2 0 0 1-1.923-2.55z",fill:"none",stroke:"currentColor",strokeWidth:"2"})})}const Or=[F.Color4.blackHighlight,F.Color4.ofRGBA(166/255,81/255,167/255,.3),F.Color4.ofRGBA(247/255,78/255,158/255,.3),F.Color4.ofRGBA(166/255,83/255,88/255,.3),F.Color4.ofRGBA(246/255,130/255,28/255,.3),F.Color4.ofRGBA(166/255,198/255,0,.3),F.Color4.ofRGBA(98/255,186/255,70/255,.3)],St=[F.Color4.black,F.Color4.fromHex("#007AFF"),F.Color4.fromHex("#A651A7"),F.Color4.fromHex("#F74E9E"),F.Color4.fromHex("#FF5358"),F.Color4.fromHex("#F6821C"),F.Color4.fromHex("#FFC600"),F.Color4.fromHex("#62BA46"),F.Color4.fromHex("#E6BFE8"),F.Color4.fromHex("#FEA3D2"),F.Color4.fromHex("#FFA0A3"),F.Color4.fromHex("#FBC276"),F.Color4.fromHex("#FFFB85"),F.Color4.fromHex("#AADC99")];function Hr({onChange:e}){const[n,i]=d.useState(F.Color4.blackHighlight);return t.jsx("div",{className:S.colorWrap,children:Or.map((r,o)=>t.jsx("button",{style:{backgroundColor:r.toHexString()},className:k(S.color,{[S.colorActive]:n.toHexString()===r.toHexString()}),onClick:()=>{i(r),e(r)}},o))})}function Ke({onChange:e}){const[n,i]=d.useState(F.Color4.black);return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:S.colorWrap,children:St.slice(0,7).map((r,o)=>t.jsx("button",{style:{backgroundColor:r.toHexString()},className:k(S.color,{[S.colorActive]:n.toHexString()===r.toHexString()}),onClick:()=>{i(r),e(r)}},o))}),t.jsx("div",{className:S.colorWrap,children:St.slice(7).map((r,o)=>t.jsx("button",{style:{backgroundColor:r.toHexString()},className:k(S.color,{[S.colorActive]:n.toHexString()===r.toHexString()}),onClick:()=>{i(r),e(r)}},o))})]})}function Br({setColorPen:e,setThicknessPen:n}){const[i,r]=d.useState(2);return t.jsxs("div",{className:S.options,children:[t.jsx("div",{children:t.jsx(Ke,{onChange:o=>e(o)})}),t.jsx("div",{className:S.line}),t.jsx("div",{children:t.jsx("input",{max:10,min:1,step:.1,type:"range",value:i,onChange:o=>{n(Number.parseFloat(o.target.value)),r(Number.parseFloat(o.target.value))}})})]})}function Vr({setColorHighlight:e}){return t.jsx("div",{className:S.options,children:t.jsx(Hr,{onChange:n=>e(n)})})}function $r({changeColorShape:e,changeBorderColorShape:n,onThicknessChange:i}){return t.jsxs("div",{className:S.options,children:[t.jsx("div",{children:t.jsx(Ke,{onChange:r=>e(r)})}),t.jsx("div",{className:S.line}),t.jsx("div",{children:t.jsx(Ke,{onChange:r=>n(r)})}),t.jsx("div",{className:S.line}),t.jsx("div",{children:t.jsx("input",{defaultValue:0,max:20,min:0,step:1,type:"range",onChange:r=>{i(Number.parseFloat(r.target.value))}})})]})}function un(e){const{setColorPen:n,refEditor:i,setThicknessPen:r,setColorHighlight:o,changeBorderColorShape:s,onUndo:c,changeColorShape:l,changeShape:a,onThicknessChange:h,onRedo:u,onClear:x}=e,[m,f]=d.useState(null),[w,p]=d.useState(0);return t.jsx(t.Fragment,{children:t.jsxs("div",{className:S.wrapper,children:[t.jsxs("div",{className:S.pen,children:[t.jsx("button",{className:k(S.tool,{[S.active]:m==="select"}),onClick:()=>{const g=i.current.toolController.getPrimaryTools();if(m==="select"){f(null),g[0].setEnabled(!1);return}f("select"),g[0].setEnabled(!0)},children:t.jsx(wr,{})}),t.jsx("div",{className:S.line}),t.jsx("button",{className:k(S.tool,{[S.active]:m==="text"}),onClick:()=>{const g=i.current.toolController.getPrimaryTools();if(i.current.toolController.setToolEnabled(g[1]),m==="text"){g[1].setEnabled(!1),f(null);return}f("text"),g[1].setEnabled(!0)},children:t.jsx(vr,{})}),t.jsx("div",{className:S.line}),t.jsx("button",{className:k(S.tool,{[S.active]:m==="pencil"}),onClick:()=>{const g=i.current.toolController.getPrimaryTools();if(m==="pencil"){f(null),g[2].setEnabled(!1);return}f("pencil"),g[2].setEnabled(!0)},children:t.jsx(br,{})}),t.jsx("button",{className:k(S.tool,{[S.active]:m==="highlighter"}),onClick:()=>{const g=i.current.toolController.getPrimaryTools();if(m==="highlighter"){f(null),g[3].setEnabled(!1);return}f("highlighter"),g[3].setEnabled(!0)},children:t.jsx(jr,{})}),t.jsx("div",{className:S.line}),t.jsx("button",{className:k(S.tool,{[S.active]:m==="eraser"}),onClick:()=>{const g=i.current.toolController.getPrimaryTools();if(m==="eraser"){f(null),g[4].setEnabled(!1);return}f("eraser"),g[4].setEnabled(!0)},children:t.jsx(Cr,{})}),t.jsx("div",{className:S.line}),t.jsx("button",{className:k(S.tool,{[S.active]:m==="shapes"&&w===0}),onClick:()=>{const g=i.current.toolController.getPrimaryTools();i.current.toolController.setToolEnabled(g[5]),f("shapes"),g[5].setEnabled(!0),a(0),p(0)},children:t.jsx(yr,{})}),t.jsx("button",{className:k(S.tool,{[S.active]:m==="shapes"&&w===1}),onClick:()=>{const g=i.current.toolController.getPrimaryTools();i.current.toolController.setToolEnabled(g[5]),f("shapes"),g[5].setEnabled(!0),a(1),p(1)},children:t.jsx(Tr,{})}),t.jsx("button",{className:k(S.tool,{[S.active]:m==="shapes"&&w===2}),onClick:()=>{const g=i.current.toolController.getPrimaryTools();i.current.toolController.setToolEnabled(g[5]),f("shapes"),g[5].setEnabled(!0),a(2),p(2)},children:t.jsx(Nr,{})}),t.jsx("button",{className:k(S.tool,{[S.active]:m==="shapes"&&w===3}),onClick:()=>{const g=i.current.toolController.getPrimaryTools();i.current.toolController.setToolEnabled(g[5]),f("shapes"),g[5].setEnabled(!0),a(3),p(3)},children:t.jsx(Sr,{})}),t.jsx("button",{className:k(S.tool,{[S.active]:m==="shapes"&&w===4}),onClick:()=>{const g=i.current.toolController.getPrimaryTools();i.current.toolController.setToolEnabled(g[5]),f("shapes"),g[5].setEnabled(!0),a(4),p(4)},children:t.jsx(kr,{})}),t.jsx("button",{className:k(S.tool,{[S.active]:m==="shapes"&&w===5}),onClick:()=>{const g=i.current.toolController.getPrimaryTools();i.current.toolController.setToolEnabled(g[5]),f("shapes"),g[5].setEnabled(!0),a(5),p(5)},children:t.jsx(Ar,{})}),t.jsx("button",{className:k(S.tool,{[S.active]:m==="shapes"&&w===6}),onClick:()=>{const g=i.current.toolController.getPrimaryTools();i.current.toolController.setToolEnabled(g[5]),f("shapes"),g[5].setEnabled(!0),a(6),p(6)},children:t.jsx(Mr,{})}),t.jsx("button",{className:k(S.tool,{[S.active]:m==="shapes"&&w===7}),onClick:()=>{const g=i.current.toolController.getPrimaryTools();i.current.toolController.setToolEnabled(g[5]),f("shapes"),g[5].setEnabled(!0),a(7),p(7)},children:t.jsx(Rr,{})}),t.jsx("button",{className:k(S.tool,{[S.active]:m==="shapes"&&w===8}),onClick:()=>{const g=i.current.toolController.getPrimaryTools();i.current.toolController.setToolEnabled(g[5]),f("shapes"),g[5].setEnabled(!0),a(8),p(8)},children:t.jsx(Pr,{})}),t.jsx("button",{className:k(S.tool,{[S.active]:m==="shapes"&&w===9}),onClick:()=>{const g=i.current.toolController.getPrimaryTools();i.current.toolController.setToolEnabled(g[5]),f("shapes"),g[5].setEnabled(!0),a(9),p(9)},children:t.jsx(zr,{})}),t.jsx("button",{className:k(S.tool,{[S.active]:m==="shapes"&&w===10}),onClick:()=>{const g=i.current.toolController.getPrimaryTools();i.current.toolController.setToolEnabled(g[5]),f("shapes"),g[5].setEnabled(!0),a(10),p(10)},children:t.jsx(Dr,{})}),t.jsx("button",{className:k(S.tool,{[S.active]:m==="shapes"&&w===11}),onClick:()=>{const g=i.current.toolController.getPrimaryTools();i.current.toolController.setToolEnabled(g[5]),f("shapes"),g[5].setEnabled(!0),a(11),p(11)},children:t.jsx(_r,{})}),t.jsx("div",{className:S.line}),t.jsx("button",{className:k(S.tool),onClick:c,children:t.jsx(Er,{})}),t.jsx("button",{className:k(S.tool),onClick:u,children:t.jsx(Lr,{})}),t.jsx("button",{className:k(S.tool),onClick:x,children:t.jsx(Ir,{})})]}),t.jsxs("div",{className:S.optionsWrap,children:[m==="pencil"&&t.jsx(Br,{setColorPen:n,setThicknessPen:r}),m==="highlighter"&&t.jsx(Vr,{setColorHighlight:o}),m==="shapes"&&t.jsx($r,{changeBorderColorShape:s,changeColorShape:l,changeShape:a,onThicknessChange:h})]})]})})}function xn(e=8){return Math.random().toString(36).substring(2,e+2)}let pe=!1;const Fr=({editor:e,upload:n})=>{const[i,r]=d.useState(!1),o=d.useRef(null),s=d.useRef(null),c=()=>{(async()=>{const j=document.querySelector("#easydrawer");j&&(o.current=new F.Editor(j,{wheelEventsEnabled:!1,disableZoom:!0}),s.current=F.makeDropdownToolbar(o.current),s.current.addDefaultToolWidgets())})()};d.useEffect(()=>{i&&setTimeout(()=>{c()},200)},[i]);const l=async()=>{if(o.current){const N=o.current.toSVG(),j=N.outerHTML,v=`drawer-${xn()}.svg`;let M=R.i(N.outerHTML);if(n){const I=lt(M,v);M=await n(I)}e==null||e.chain().focus().setDrawer({type:"drawer",src:M,alt:encodeURIComponent(j),width:426,height:212},!!j).run()}r(!1)},a=N=>{const j=o.current.toolController.getPrimaryTools()[2],v=s.current.getWidgetById("pen-1");j&&v&&(j.setColor(N),v.serializeState())},h=N=>{const j=o.current.toolController.getPrimaryTools()[2],v=s.current.getWidgetById("pen-1");j&&v&&(j.setThickness(N),v.serializeState())},u=N=>{const j=o.current.toolController.getPrimaryTools()[3],v=s.current.getWidgetById("pen-2");j&&v&&(j.setColor(N),v.serializeState())},x=N=>{const j=s.current.getWidgetById("shape");j&&j.setShapeType(N)},m=N=>{const j=o.current.toolController.getPrimaryTools()[5],v=s.current.getWidgetById("shape");j&&v&&(j.setColor(N),v.serializeState())},f=N=>{const j=o.current.toolController.getPrimaryTools()[5],v=s.current.getWidgetById("shape");j&&v&&(j.setThickness(N),v.serializeState())},w=N=>{const j=o.current.toolController.getPrimaryTools()[5],v=s.current.getWidgetById("shape");j&&v&&(j.setBorderColor(N),v.serializeState())},p=()=>{if(pe){for(;o.current.history.redoStackSize>0;)o.current.history.redo();pe=!1;return}o.current.history.undo()},g=()=>{pe||o.current.history.redo()},H=()=>{if(!pe){for(;o.current.history.undoStackSize>0;)p();pe=!0}};return t.jsxs(fe,{onOpenChange:r,open:i,children:[t.jsx(ge,{asChild:!0,children:t.jsx(_,{action:()=>r(!0),icon:"PencilRuler",tooltip:"Drawer"})}),t.jsxs(ae,{className:"richtext-z-[99999] !richtext-max-w-[1300px]",children:[t.jsx(le,{children:"Drawer"}),t.jsxs("div",{style:{height:"600px",width:"100%",borderWidth:1,background:"white",position:"relative"},children:[t.jsx("div",{className:"richtext-size-full",id:"easydrawer"}),t.jsx(un,{changeBorderColorShape:w,changeColorShape:m,changeShape:x,onClear:H,onRedo:g,onThicknessChange:f,onUndo:p,refEditor:o,setColorHighlight:u,setColorPen:a,setThicknessPen:h})]}),t.jsx(Se,{children:t.jsx(G,{onClick:l,type:"button",children:"Save changes"})})]})]})},Le={TOP_LEFT:"tl",TOP_RIGHT:"tr",BOTTOM_LEFT:"bl",BOTTOM_RIGHT:"br"};function Wr({editor:e,node:n,updateAttributes:i,getPos:r,selected:o}){const[s,c]=d.useState({width:A.IMAGE_MAX_SIZE,height:A.IMAGE_MAX_SIZE}),[l,a]=d.useState({width:0,height:0}),[h]=d.useState([Le.TOP_LEFT,Le.TOP_RIGHT,Le.BOTTOM_LEFT,Le.BOTTOM_RIGHT]),[u,x]=d.useState(!1),[m,f]=d.useState({x:0,y:0,w:0,h:0,dir:""}),{align:w}=n==null?void 0:n.attrs,p=d.useMemo(()=>{const{src:T,alt:y,width:B,height:O}=n==null?void 0:n.attrs,P=z.isNumber(B)?`${B}px`:B,D=z.isNumber(O)?`${O}px`:O;return{src:T||void 0,alt:y||void 0,style:{width:P||void 0,height:D||void 0}}},[n==null?void 0:n.attrs]),g=d.useMemo(()=>{const{style:{width:T}}=p;return{width:T==="100%"?T:void 0}},[p]);function H(T){a({width:T.target.width,height:T.target.height})}function N(){e.commands.setNodeSelection(r())}const j=d.useCallback(R.throttle(()=>{const{width:T}=getComputedStyle(e.view.dom);c(y=>({...y,width:Number.parseInt(T,10)}))},A.IMAGE_THROTTLE_WAIT_TIME),[e]);function v(T,y){T.preventDefault(),T.stopPropagation();const B=l.width,O=l.height,P=B/O;let D=Number(n.attrs.width),$=Number(n.attrs.height);const q=s.width;D&&!$?(D=D>q?q:D,$=Math.round(D/P)):$&&!D?(D=Math.round($*P),D=D>q?q:D):!D&&!$?(D=B>q?q:B,$=Math.round(D/P)):D=D>q?q:D,x(!0),f({x:T.clientX,y:T.clientY,w:D,h:$,dir:y})}const M=d.useCallback(R.throttle(T=>{if(T.preventDefault(),T.stopPropagation(),!u)return;const{x:y,w:B,dir:O}=m,P=(T.clientX-y)*(/l/.test(O)?-1:1),{width:D,height:$}=n==null?void 0:n.attrs,q=D/$,X=On(B+P,A.IMAGE_MIN_SIZE,s.width),ie=Math.round(X/q);i({width:X,height:ie})},A.IMAGE_THROTTLE_WAIT_TIME),[u,m,s,i,n==null?void 0:n.attrs]),I=d.useCallback(T=>{T.preventDefault(),T.stopPropagation(),u&&(f({x:0,y:0,w:0,h:0,dir:""}),x(!1),N())},[u,N]),E=d.useCallback(()=>{document==null||document.addEventListener("mousemove",M,!0),document==null||document.addEventListener("mouseup",I,!0)},[M,I]),C=d.useCallback(()=>{document==null||document.removeEventListener("mousemove",M,!0),document==null||document.removeEventListener("mouseup",I,!0)},[M,I]);d.useEffect(()=>(u?E():C(),()=>{C()}),[u,E,C]);const L=d.useMemo(()=>new ResizeObserver(()=>j()),[j]);return d.useEffect(()=>(L.observe(e.view.dom),()=>{L.disconnect()}),[e.view.dom,L]),t.jsx(z.NodeViewWrapper,{className:"image-view",style:{...g,width:"100%",textAlign:w},children:t.jsxs("div",{"data-drag-handle":!0,draggable:"true",style:{...g,background:"#fff"},className:`image-view__body ${o?"image-view__body--focused":""} ${u?"image-view__body--resizing":""}`,children:[t.jsx("img",{alt:p.alt,className:"image-view__body__image block",height:"auto",onClick:N,onLoad:H,src:p.src,style:p.style}),e.view.editable&&(o||u)&&t.jsx("div",{className:"image-resizer",children:h==null?void 0:h.map(T=>t.jsx("span",{className:`image-resizer__handler image-resizer__handler--${T}`,onMouseDown:y=>v(y,T)},`image-dir-${T}`))})]})})}const Je=z.Image.extend({name:"drawer",addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),inline:!1,content:"",marks:"",group:"block",draggable:!1,selectable:!0,atom:!0,HTMLAttributes:{class:"drawer"},button:({editor:n,t:i,extension:r})=>{var o;return{component:Fr,componentProps:{action:()=>!0,isActive:()=>!1,disabled:!1,editor:n,icon:"PencilRuler",tooltip:i("editor.drawer.tooltip"),upload:(o=r==null?void 0:r.options)==null?void 0:o.upload}}}}},addAttributes(){var e;return{...(e=this.parent)==null?void 0:e.call(this),width:{default:null,parseHTML:n=>{const i=n.querySelector("img"),r=i==null?void 0:i.getAttribute("width");return r?Number.parseInt(r,10):320},renderHTML:n=>({width:n.width})},height:{default:null,parseHTML:n=>{const i=n.querySelector("img"),r=i==null?void 0:i.getAttribute("height");return r?Number.parseInt(r,10):212},renderHTML:n=>({height:n.height})},align:{default:"center",parseHTML:n=>n.getAttribute("align"),renderHTML:n=>({align:n.align})}}},addNodeView(){return z.ReactNodeViewRenderer(Wr)},addCommands(){return{setDrawer:(e,n)=>({commands:i,editor:r})=>n?i.insertContent({type:this.name,attrs:e}):i.insertContentAt(r.state.selection.anchor,{type:this.name,attrs:e}),setAlignImageDrawer:e=>({commands:n})=>n.updateAttributes(this.name,{align:e})}},renderHTML({HTMLAttributes:e}){const{align:n}=e;return["div",{style:n?`text-align: ${n};`:"",class:"imageDrawer"},["img",z.mergeAttributes(this.options.HTMLAttributes,e)]]},parseHTML(){return[{tag:"div[class=imageDrawer]",getAttrs:e=>{const n=e.querySelector("img"),i=n==null?void 0:n.getAttribute("width"),r=n==null?void 0:n.getAttribute("height");return{src:n==null?void 0:n.getAttribute("src"),alt:n==null?void 0:n.getAttribute("alt"),width:i?Number.parseInt(i,10):null,height:r?Number.parseInt(r,10):null,align:(n==null?void 0:n.getAttribute("align"))||e.style.textAlign||null}}}]}});let we=!1;function qr({editor:e,attrs:n,extension:i}){const[r,o]=d.useState(!1),s=d.useRef(null),c=d.useRef(null),{alt:l,align:a}=n,h=i==null?void 0:i.options.upload,u=()=>{(async()=>{const E=document.querySelector("#easydrawer");E&&(s.current=new F.Editor(E,{wheelEventsEnabled:!1,disableZoom:!0}),c.current=F.makeDropdownToolbar(s.current),c.current.addDefaultToolWidgets(),s.current.loadFromSVG(decodeURIComponent(l)))})()};d.useEffect(()=>{r&&setTimeout(()=>{u()},200)},[r]);const x=async()=>{if(s.current){const I=s.current.toSVG(),E=I.outerHTML,C=`drawer-${xn()}.svg`;let L=R.i(I.outerHTML);if(h){const T=lt(L,C);L=await h(T)}e==null||e.chain().focus().setDrawer({type:"drawer",src:L,alt:encodeURIComponent(E),width:426,height:212},!!E).run(),e==null||e.commands.setAlignImageDrawer(a)}o(!1)},m=I=>{const E=s.current.toolController.getPrimaryTools()[2],C=c.current.getWidgetById("pen-1");E&&C&&(E.setColor(I),C.serializeState())},f=I=>{const E=s.current.toolController.getPrimaryTools()[2],C=c.current.getWidgetById("pen-1");E&&C&&(E.setThickness(I),C.serializeState())},w=I=>{const E=s.current.toolController.getPrimaryTools()[3],C=c.current.getWidgetById("pen-2");E&&C&&(E.setColor(I),C.serializeState())},p=I=>{const E=c.current.getWidgetById("shape");E&&E.setShapeType(I)},g=I=>{const E=s.current.toolController.getPrimaryTools()[5],C=c.current.getWidgetById("shape");E&&C&&(E.setColor(I),C.serializeState())},H=I=>{const E=s.current.toolController.getPrimaryTools()[5],C=c.current.getWidgetById("shape");E&&C&&(E.setThickness(I),C.serializeState())},N=I=>{const E=s.current.toolController.getPrimaryTools()[5],C=c.current.getWidgetById("shape");E&&C&&(E.setBorderColor(I),C.serializeState())},j=()=>{if(we){for(;s.current.history.redoStackSize>0;)s.current.history.redo();we=!1;return}s.current.history.undo()},v=()=>{we||s.current.history.redo()},M=()=>{if(!we){for(;s.current.history.undoStackSize>0;)j();we=!0}};return t.jsxs(fe,{onOpenChange:o,open:r,children:[t.jsx(ge,{asChild:!0,children:t.jsx(_,{action:()=>o(!0),icon:"Pencil",tooltip:"Edit Drawer"})}),t.jsxs(ae,{className:"richtext-z-[99999] !richtext-max-w-[1300px]",children:[t.jsx(le,{children:"Edit Drawer"}),t.jsxs("div",{style:{height:"100%",borderWidth:1,background:"white",position:"relative"},children:[t.jsx("div",{className:"richtext-size-full",id:"easydrawer"}),t.jsx(un,{changeBorderColorShape:N,changeColorShape:g,changeShape:p,onClear:M,onRedo:v,onThicknessChange:H,onUndo:j,refEditor:s,setColorHighlight:w,setColorPen:m,setThicknessPen:f})]}),t.jsx(Se,{children:t.jsx(G,{onClick:x,type:"button",children:"Save changes"})})]})]})}function Gr(e){return e}function mn(e,n,i,r){const o=Gr,[s,c]=d.useState(o(i)),l=d.useRef(s);return d.useEffect(()=>{const a=()=>{const h={...i,...e.getAttributes(n)};Object.keys(h).forEach(x=>{(h[x]===null||h[x]===void 0)&&(h[x]=i?i[x]:null)});const u=o(h);R.deepEqual(l.current,u)||(c(u),l.current=u)};return e.on("selectionUpdate",a),e.on("transaction",a),()=>{e.off("selectionUpdate",a),e.off("transaction",a)}},[e,i,n,o]),s}function Ur(e,n){const[i,r]=d.useState(void 0);return d.useEffect(()=>{const o=()=>{const s=e.extensionManager.extensions.find(c=>c.name===n);s&&r(s)};return e.on("selectionUpdate",o),e.on("transaction",o),()=>{e.off("selectionUpdate",o),e.off("transaction",o)}},[e,n]),i}const Xr={maxWidth:"auto",zIndex:20,appendTo:"parent",moveTransition:"transform 0.1s ease-out"};function Zr({item:e,disabled:n,editor:i}){var o;const r=e.component;return r?t.jsx(d.Fragment,{children:e.type==="divider"?t.jsx(Q,{className:"!richtext-mx-1 !richtext-my-2 !richtext-h-[16px]",orientation:"vertical"}):t.jsx(r,{...e.componentProps,disabled:n||((o=e==null?void 0:e.componentProps)==null?void 0:o.disabled),editor:i})}):t.jsx(t.Fragment,{})}function Yr(e){return e.type.name==="drawer"}function Kr(e){const{lang:n}=A.useLocale(),i=mn(e.editor,Je.name),r=Ur(e.editor,Je.name),o=({editor:c})=>{const{selection:l}=c.view.state,{$from:a,to:h}=l;let u=!1;return c.view.state.doc.nodesBetween(a.pos,h,x=>{if(Yr(x))return u=!0,!1}),u},s=d.useMemo(()=>e.disabled?[]:mo(e.editor),[e.disabled,e.editor,n]);return t.jsx(t.Fragment,{children:t.jsx(z.BubbleMenu,{editor:e==null?void 0:e.editor,shouldShow:o,tippyOptions:Xr,children:s!=null&&s.length?t.jsx("div",{className:"richtext-pointer-events-auto richtext-w-auto richtext-select-none richtext-rounded-sm !richtext-border richtext-border-neutral-200 richtext-bg-background richtext-px-3 richtext-py-2 richtext-shadow-sm richtext-transition-all dark:richtext-border-neutral-800",children:t.jsx("div",{className:"richtext-relative richtext-flex richtext-h-[26px] richtext-flex-nowrap richtext-items-center richtext-justify-start richtext-whitespace-nowrap",children:s==null?void 0:s.map((c,l)=>c.type==="edit"&&(i!=null&&i.src)?t.jsx(qr,{attrs:i,editor:e.editor,extension:r},`bubbleMenu-drawer-${l}`):t.jsx(Zr,{disabled:e.disabled,editor:e.editor,item:c},`bubbleMenu-drawer-${l}`))})}):t.jsx(t.Fragment,{})})})}const Jr={padding:"0 12px 12px"},Qr=({width:e,maxWidth:n,height:i,onOk:r,children:o})=>{const{t:s}=A.useLocale(),[c,l]=d.useState({width:"",height:"",maxWidth:""});d.useEffect(()=>{l({width:e,height:i,maxWidth:n})},[i,n,e]);function a(h){h.preventDefault(),h.stopPropagation(),r(c)}return t.jsxs(xe,{modal:!0,children:[t.jsx(me,{asChild:!0,children:o}),t.jsx(ce,{children:t.jsx("div",{style:Jr,children:t.jsxs("form",{className:"richtext-flex richtext-flex-col richtext-gap-2",onSubmit:a,children:[t.jsx(ne,{className:"mb-[6px]",children:"Width"}),t.jsx("div",{className:"richtext-flex richtext-w-full richtext-max-w-sm richtext-items-center richtext-gap-1.5",children:t.jsx("div",{className:"richtext-relative richtext-items-center richtext-w-full richtext-max-w-sm",children:t.jsx(Z,{type:"number",value:c.width,required:!0,onChange:h=>l({...c,width:h.target.value})})})}),t.jsx(ne,{className:"mb-[6px]",children:"Max Width"}),t.jsx("div",{className:"richtext-flex richtext-w-full richtext-max-w-sm richtext-items-center richtext-gap-1.5",children:t.jsx("div",{className:"richtext-relative richtext-items-center richtext-w-full richtext-max-w-sm",children:t.jsx(Z,{type:"number",value:c.maxWidth,required:!0,onChange:h=>l({...c,maxWidth:h.target.value})})})}),t.jsx(ne,{className:"mb-[6px]",children:"Height"}),t.jsx("div",{className:"richtext-flex richtext-w-full richtext-max-w-sm richtext-items-center richtext-gap-1.5",children:t.jsx("div",{className:"richtext-relative richtext-items-center richtext-w-full richtext-max-w-sm",children:t.jsx(Z,{type:"number",value:c.height,required:!0,onChange:h=>l({...c,height:h.target.value})})})}),t.jsx(G,{type:"submit",className:"richtext-self-end richtext-mt-2",children:s("editor.link.dialog.button.apply")})]})})})]})};function ut(e,n){const{state:i}=n,r=i.selection.$anchor;let o=!1;if(r.depth)for(let s=r.depth;s>0;s--)r.node(s).type.name===e&&(n.dispatchTransaction&&n.dispatchTransaction(i.tr.delete(r.before(s),r.after(s)).scrollIntoView()),o=!0);else{const s=i.selection.node;s&&s.type.name===e&&(n.chain().deleteSelection().run(),o=!0)}if(!o){const s=r.pos;if(s){const c=i.tr.doc.nodeAt(s);c&&c.type.name===e&&(n.dispatchTransaction&&n.dispatchTransaction(i.tr.delete(s,s+c.nodeSize)),o=!0)}}return o}function eo({editor:e}){const{t:n}=A.useLocale(),{width:i,height:r,url:o}=mn(e,oe.name,{width:0,height:0,url:"",defaultShowPicker:!1}),[s,c]=d.useState(!1),[l,a]=d.useState(""),h=d.useCallback(()=>{c(!1)},[c]);d.useEffect(()=>{s&&a(o)},[s,o]);const u=d.useCallback(()=>{e.chain().updateAttributes(oe.name,{url:l}).setNodeSelection(e.state.selection.from).focus().run(),c(!1)},[e,l,c]),x=d.useCallback(()=>{window.open(o,"_blank")},[o]),m=d.useCallback(()=>{c(!0)},[c]),f=d.useCallback(g=>{e.chain().updateAttributes(oe.name,g).setNodeSelection(e.state.selection.from).focus().run()},[e]),w=d.useCallback(()=>e.isActive(oe.name)&&!o,[e,o]),p=d.useCallback(()=>ut(oe.name,e),[e]);return t.jsxs(t.Fragment,{children:[t.jsx(z.BubbleMenu,{className:"bubble-menu",editor:e,pluginKey:"iframe-bubble-menu",shouldShow:w,tippyOptions:{popperOptions:{modifiers:[{name:"flip",enabled:!1}]},placement:"bottom-start",offset:[-2,16],zIndex:9999},children:t.jsxs("div",{className:"richtext-w-auto richtext-px-3 richtext-py-2 richtext-transition-all !richtext-border richtext-rounded-sm richtext-shadow-sm richtext-pointer-events-auto richtext-select-none richtext-border-neutral-200 dark:richtext-border-neutral-800 richtext-bg-background",children:[t.jsx(_,{action:x,icon:"Eye",tooltip:"Visit Link"}),t.jsx(_,{action:m,icon:"Pencil",tooltip:"Open Edit Link"}),t.jsx(Qr,{width:i,height:r,onOk:f,children:t.jsx(_,{icon:"Settings",tooltip:n("editor.settings")})}),t.jsx(_,{action:p,icon:"Trash2",tooltip:n("editor.delete")})]})}),t.jsxs(fe,{open:s,onOpenChange:c,children:[t.jsx(ge,{}),t.jsxs(ae,{children:[t.jsx(ln,{children:t.jsx(le,{children:"Edit Link Iframe"})}),t.jsx(Z,{value:l,onInput:g=>a(g.target.value),type:"url",autoFocus:!0,placeholder:"Enter link"}),t.jsxs(Se,{children:[t.jsx(G,{onClick:h,children:"Cancel"}),t.jsx(G,{onClick:u,children:"OK"})]})]})]})]})}function to({editor:e,disabled:n}){const[i,r]=d.useState(!1),{t:o}=A.useLocale(),s=d.useCallback(({editor:a})=>a.isActive(_e.name),[]),c=a=>{e.commands.updateTweet({src:a}),r(!1)},l=d.useCallback(()=>ut(_e.name,e),[e]);return t.jsx(t.Fragment,{children:t.jsx(z.BubbleMenu,{editor:e,shouldShow:s,tippyOptions:{popperOptions:{modifiers:[{name:"flip",enabled:!1}]},placement:"bottom-start",offset:[-2,16],zIndex:9999,onHidden:()=>{r(!1)}},children:n?t.jsx(t.Fragment,{}):t.jsx(t.Fragment,{children:i?t.jsx(hn,{editor:e,onSetLink:c}):t.jsx("div",{className:"richtext-flex richtext-items-center richtext-gap-2 richtext-rounded-lg !richtext-border richtext-border-neutral-200 richtext-bg-white richtext-p-2 richtext-shadow-sm dark:richtext-border-neutral-800 dark:richtext-bg-black",children:t.jsxs("div",{className:"richtext-flex richtext-flex-nowrap",children:[t.jsx(_,{icon:"Pencil",tooltip:o("editor.link.edit.tooltip"),tooltipOptions:{sideOffset:15},action:()=>{r(!0)}}),t.jsx(_,{action:l,icon:"Trash",tooltip:o("editor.delete"),tooltipOptions:{sideOffset:15}})]})})})})})}function no({editor:e,disabled:n,bubbleMenu:i}){const r=e.extensionManager.extensions.map(s=>s.name),o=()=>{var s,c,l,a,h,u,x,m,f,w,p,g;return[r.includes("columns")&&!((s=i==null?void 0:i.columnConfig)!=null&&s.hidden)?t.jsx(Po,{editor:e},"columns"):null,r.includes("table")&&!((c=i==null?void 0:i.tableConfig)!=null&&c.hidden)?t.jsx(No,{editor:e,actions:(l=i==null?void 0:i.tableConfig)==null?void 0:l.actions},"table"):null,r.includes("link")&&!((a=i==null?void 0:i.linkConfig)!=null&&a.hidden)?t.jsx(ko,{disabled:n,editor:e},"link"):null,r.includes(ue.name)&&!((h=i==null?void 0:i.imageConfig)!=null&&h.hidden)?t.jsx(Lo,{disabled:n,editor:e},"image"):null,r.includes(ht.name)&&!((u=i==null?void 0:i.imageGifConfig)!=null&&u.hidden)?t.jsx(Io,{disabled:n,editor:e},"imageGif"):null,r.includes("video")&&!((x=i==null?void 0:i.videoConfig)!=null&&x.hidden)?t.jsx(Ro,{disabled:n,editor:e},"video"):null,r.includes("iframe")&&!((m=i==null?void 0:i.iframeConfig)!=null&&m.hidden)?t.jsx(eo,{disabled:n,editor:e},"iframe"):null,r.includes("twitter")&&!((f=i==null?void 0:i.twitterConfig)!=null&&f.hidden)?t.jsx(to,{disabled:n,editor:e},"twitter"):null,(w=i==null?void 0:i.floatingMenuConfig)!=null&&w.hidden?null:t.jsx(jo,{disabled:n,editor:e},"content"),(p=i==null?void 0:i.textConfig)!=null&&p.hidden?null:t.jsx(To,{disabled:n,editor:e},"text"),r.includes("drawer")&&!((g=i==null?void 0:i.drawerConfig)!=null&&g.hidden)?t.jsx(Kr,{disabled:n,editor:e},"drawer"):null]};return i!=null&&i.render?i.render({editor:e,disabled:n||!1,bubbleMenu:i},o()):o().filter(Boolean)}function kt(){return t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:t.jsx("path",{fill:"currentColor",d:"M18 14c0-4-6-10.8-6-10.8s-1.33 1.51-2.73 3.52l8.59 8.59c.09-.42.14-.86.14-1.31m-.88 3.12L12.5 12.5L5.27 5.27L4 6.55l3.32 3.32C6.55 11.32 6 12.79 6 14c0 3.31 2.69 6 6 6c1.52 0 2.9-.57 3.96-1.5l2.63 2.63l1.27-1.27z"})})}function fn(e){const{t:n}=A.useLocale(),{highlight:i=!1,disabled:r=!1,selectedColor:o,setSelectedColor:s,onChange:c,colors:l=A.COLORS_LIST}=e,a=d.useMemo(()=>{const f=l,w=[];for(let p=0;p<f.length;p+=10)w.push(f.slice(p,p+10));return w},[l]),[h,u]=d.useState([]),x=f=>{const w=[...h],p=w.indexOf(f);p!==-1&&w.splice(p,1),w.unshift(f),w.length>10&&w.pop(),u(w)};function m(f){if(f===void 0){s==null||s(f),c==null||c(f);return}/^#([\da-f]{3}){1,2}$/i.test(f)&&(s==null||s(f),c==null||c(f),x(f))}return t.jsxs(xe,{modal:!0,children:[t.jsx(me,{asChild:!0,className:"!richtext-p-0",disabled:r,children:e==null?void 0:e.children}),t.jsx(ce,{align:"start",className:"richtext-size-full richtext-p-2",hideWhenDetached:!0,side:"bottom",children:t.jsxs("div",{className:"richtext-flex richtext-flex-col",children:[i?t.jsxs("div",{className:"rd-1 richtext-flex richtext-cursor-pointer richtext-items-center richtext-gap-[4px] richtext-p-1 hover:richtext-bg-accent",onClick:()=>m(void 0),children:[t.jsx(kt,{}),t.jsx("span",{className:"richtext-ml-1 richtext-text-sm",children:n("editor.nofill")})]}):t.jsxs("div",{className:"rd-1 richtext-flex richtext-cursor-pointer richtext-items-center richtext-gap-[4px] richtext-p-1 hover:richtext-bg-accent",onClick:()=>{m(void 0)},children:[t.jsx(kt,{}),t.jsx("span",{className:"richtext-ml-1 richtext-text-sm",children:n("editor.default")})]}),a.map((f,w)=>t.jsx("span",{className:"richtext-relative richtext-flex richtext-h-auto richtext-w-full richtext-p-0 last:richtext-pb-2",children:f.map((p,g)=>t.jsx("span",{className:"richtext-inline-block richtext-size-6 richtext-flex-[0_0_auto] richtext-cursor-pointer richtext-rounded-sm !richtext-border richtext-border-transparent richtext-p-0.5 hover:richtext-border-border hover:richtext-shadow-sm",onClick:()=>m(p),children:t.jsx("span",{className:"richtext-relative richtext-block richtext-size-[18px] richtext-rounded-[2px] richtext-border-transparent",style:{backgroundColor:p},children:p===o?t.jsx("svg",{className:"richtext-absolute -richtext-top-px richtext-left-px richtext-block richtext-size-3",viewBox:"0 0 18 18",style:{fill:"rgb(255, 255, 255)"},children:t.jsx("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"})}):t.jsx("svg",{viewBox:"0 0 18 18",style:{fill:"rgb(255, 255, 255)",display:"none"},children:t.jsx("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"})})})},`sub-color-${g}`))},w)),t.jsxs("div",{children:[t.jsx("div",{className:"richtext-my-1 richtext-text-sm",children:n("editor.recent")}),t.jsx("span",{className:"richtext-relative richtext-flex richtext-h-auto richtext-w-full richtext-p-0 last:richtext-pb-2",children:h==null?void 0:h.map((f,w)=>t.jsx("span",{className:"richtext-inline-block richtext-size-6 richtext-flex-[0_0_auto] richtext-cursor-pointer richtext-rounded-sm !richtext-border richtext-border-transparent richtext-p-0.5 hover:richtext-border-border hover:richtext-shadow-sm",onClick:()=>m(f),children:t.jsx("span",{className:"richtext-relative richtext-block richtext-size-[18px] richtext-rounded-[2px] richtext-border-transparent",style:{backgroundColor:f},children:t.jsx("svg",{viewBox:"0 0 18 18",style:{fill:"rgb(255, 255, 255)",display:"none"},children:t.jsx("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"})})})},`sub-color-recent-${w}`))})]}),t.jsx(io,{setColor:m})]})})]})}function io({setColor:e}){const[n,i]=d.useState("#000000"),[r,o]=d.useState(!1),{t:s}=A.useLocale();return d.useEffect(()=>()=>{o(!1)},[]),t.jsxs(xe,{open:r,children:[t.jsx(me,{asChild:!0,children:t.jsxs("div",{className:"richtext-p-1.5 richtext-text-sm hover:richtext-cursor-pointer hover:richtext-bg-accent",onClick:c=>{c.preventDefault(),o(!0)},children:[s("editor.color.more"),"..."]})}),t.jsxs(ce,{children:[t.jsxs("div",{className:"richtext-flex richtext-flex-col richtext-items-center richtext-justify-center",children:[t.jsx(In.HexColorPicker,{color:n,onChange:i}),t.jsx(Z,{className:"richtext-mt-[8px] richtext-w-full",type:"text",value:n.slice(1),onChange:c=>{c.preventDefault(),i(`#${c.target.value}`)}})]}),t.jsx(Q,{className:"richtext-my-[10px]"}),t.jsx(G,{className:"richtext-w-full",onClick:c=>{c.preventDefault(),e(n),o(!1)},children:t.jsx(b.Plus,{size:16})})]})]})}function ro({editor:e,disabled:n,toolbar:i}){const{t:r,lang:o}=A.useLocale(),s=d.useMemo(()=>{const h=[...e.extensionManager.extensions].sort((x,m)=>{const f=x.options.sort??-1,w=m.options.sort??-1;return f-w});let u=[];for(const x of h){const{button:m,divider:f=!1,spacer:w=!1,toolbar:p=!0}=x.options;if(!m||!Vn(m)||!p)continue;const g=m({editor:e,extension:x,t:r});if(Array.isArray(g)){const H=g.map((N,j)=>({button:N,divider:j===g.length-1?f:!1,spacer:j===0?w:!1,type:x.type,name:x.name}));u=[...u,...H];continue}u.push({button:g,divider:f,spacer:w,type:x.type,name:x.name})}return u},[e,r,o]),c=a=>t.jsx("div",{className:"richtext-px-1 richtext-py-2 !richtext-border-b",style:{pointerEvents:n?"none":"auto",opacity:n?.5:1},children:t.jsx("div",{className:"richtext-relative richtext-flex richtext-flex-wrap richtext-h-auto richtext-gap-y-1 richtext-gap-x-1",children:a})}),l=s.map((a,h)=>{var x,m;const u=a.button.component;return t.jsxs("div",{className:"richtext-flex richtext-items-center",children:[(a==null?void 0:a.spacer)&&t.jsx(Q,{orientation:"vertical",className:"!richtext-h-[16px] !richtext-mx-[10px]"}),t.jsx(u,{...a.button.componentProps,disabled:n||((m=(x=a==null?void 0:a.button)==null?void 0:x.componentProps)==null?void 0:m.disabled)}),(a==null?void 0:a.divider)&&t.jsx(Q,{orientation:"vertical",className:"!richtext-h-auto !richtext-mx-2"})]},`toolbar-item-${h}`)});return i&&(i!=null&&i.render)?i.render({editor:e,disabled:n||!1},s,l,c):c(l)}function oo(e){const n=["size-small","size-medium","size-large"],i=["SizeS","SizeM","SizeL"];return n.map((r,o)=>({type:`image-${r}`,component:_,componentProps:{tooltip:A.localeActions.t(`editor.${r.replace("-",".")}.tooltip`),icon:i[o],action:()=>e.commands.updateImage({width:A.IMAGE_SIZE[r]}),isActive:()=>e.isActive("image",{width:A.IMAGE_SIZE[r]})}}))}function so(e){const n=["size-small","size-medium","size-large"],i=["SizeS","SizeM","SizeL"];return n.map((r,o)=>({type:`image-${r}`,component:_,componentProps:{tooltip:A.localeActions.t(`editor.${r.replace("-",".")}.tooltip`),icon:i[o],action:()=>e.commands.updateImageGif({width:A.IMAGE_SIZE[r]}),isActive:()=>e.isActive("image",{width:A.IMAGE_SIZE[r]})}}))}function co(e){const n=["left","center","right"],i={left:"AlignLeft",center:"AlignCenter",right:"AlignRight"};return n.map(r=>({type:`image-${r}`,component:_,componentProps:{tooltip:A.localeActions.t(`editor.textalign.${r}.tooltip`),icon:i[r],action:()=>{var o,s;return(s=(o=e.commands)==null?void 0:o.setAlignImage)==null?void 0:s.call(o,r)},isActive:()=>e.isActive({align:r})||!1,disabled:!1}}))}function ao(e){const n=["left","center","right"],i={left:"AlignLeft",center:"AlignCenter",right:"AlignRight"};return n.map(r=>({type:`image-${r}`,component:_,componentProps:{tooltip:A.localeActions.t(`editor.textalign.${r}.tooltip`),icon:i[r],action:()=>{var o,s;return(s=(o=e.commands)==null?void 0:o.setAlignImageGif)==null?void 0:s.call(o,r)},isActive:()=>e.isActive({align:r})||!1,disabled:!1}}))}function lo(e){const n=["left","center","right"],i={left:"AlignLeft",center:"AlignCenter",right:"AlignRight"};return n.map(r=>({type:`image-${r}`,component:_,componentProps:{tooltip:A.localeActions.t(`editor.textalign.${r}.tooltip`),icon:i[r],action:()=>{var o,s;return(s=(o=e.commands)==null?void 0:o.setAlignImageDrawer)==null?void 0:s.call(o,r)},isActive:()=>e.isActive({align:r})||!1,disabled:!1}}))}function ho(e){const n=["size-small","size-medium","size-large"],i=["SizeS","SizeM","SizeL"];return n.map((r,o)=>({type:`video-${r}`,component:_,componentProps:{tooltip:A.localeActions.t(`editor.${r.replace("-",".")}.tooltip`),icon:i[o],action:()=>e.commands.updateVideo({width:A.VIDEO_SIZE[r]}),isActive:()=>e.isActive("video",{width:A.VIDEO_SIZE[r]})}}))}function uo(e){return[{type:"flipX",component:_,componentProps:{editor:e,tooltip:A.localeActions.t("editor.tooltip.flipX"),icon:"FlipX",action:()=>{const n=e.getAttributes("image"),{flipX:i}=n;e.chain().focus(void 0,{scrollIntoView:!1}).updateImage({flipX:!i}).run()}}},{type:"flipY",component:_,componentProps:{editor:e,tooltip:A.localeActions.t("editor.tooltip.flipY"),icon:"FlipY",action:()=>{const n=e.getAttributes("image"),{flipY:i}=n;e.chain().focus(void 0,{scrollIntoView:!1}).updateImage({flipY:!i}).run()}}},...oo(e),...co(e),{type:"remove",component:_,componentProps:{editor:e,tooltip:A.localeActions.t("editor.remove"),icon:"Trash2",action:()=>{const{state:n,dispatch:i}=e.view;R.deleteSelection(n,i)}}}]}function xo(e){return[...so(e),...ao(e),{type:"remove",component:_,componentProps:{editor:e,tooltip:A.localeActions.t("editor.remove"),icon:"Trash2",action:()=>{const{state:n,dispatch:i}=e.view;R.deleteSelection(n,i)}}}]}function mo(e){return[...lo(e),{type:"edit",component:_,componentProps:{editor:e,tooltip:A.localeActions.t("editor.edit"),icon:"Pencil",action:()=>(console.log("AAA"),!0)}},{type:"remove",component:_,componentProps:{editor:e,tooltip:A.localeActions.t("editor.remove"),icon:"Trash2",action:()=>{const{state:n,dispatch:i}=e.view;R.deleteSelection(n,i)}}}]}function fo(e){return[...ho(e),{type:"remove",component:_,componentProps:{editor:e,tooltip:A.localeActions.t("editor.remove"),icon:"Trash2",action:()=>{const{state:n,dispatch:i}=e.view;R.deleteSelection(n,i)}}}]}function go(e,n){return A.BUBBLE_TEXT_LIST.reduce((i,r)=>{if(r==="divider"&&i.length>0)return[...i,{type:"divider",component:void 0,componentProps:{}}];const o=e.extensionManager.extensions.find(s=>s.name===r);return o?[...i,o.configure().options.button({editor:e,t:n,extension:o})]:i},[])}function xt(e,n,i){const r=[],o=e.node(0);i=typeof i=="number"&&i>=0?i:e.sameParent(n)?Math.max(0,e.sharedDepth(n.pos)-1):e.sharedDepth(n.pos);const s=new R.NodeRange(e,n,i),c=s.depth===0?0:o.resolve(s.start).posAtIndex(0);return s.parent.forEach((l,a)=>{const h=c+a,u=h+l.nodeSize;if(h<s.start||h>=s.end)return;const x=new R.SelectionRange(o.resolve(h),o.resolve(u));r.push(x)}),r}class mt{constructor(n,i){ke(this,"anchor");ke(this,"head");this.anchor=n,this.head=i}map(n){return new mt(n.map(this.anchor),n.map(this.head))}resolve(n){const i=n.resolve(this.anchor),r=n.resolve(this.head);return new te(i,r)}}class te extends R.Selection{constructor(i,r,o,s=1){const{doc:c}=i,l=i===r,a=i.pos===c.content.size&&r.pos===c.content.size,h=l&&!a?c.resolve(r.pos+(s>0?1:-1)):r,u=l&&a?c.resolve(i.pos-(s>0?1:-1)):i,x=xt(u.min(h),u.max(h),o);super(h.pos>=i.pos?x[0].$from:x[x.length-1].$to,h.pos>=i.pos?x[x.length-1].$to:x[0].$from,x);ke(this,"depth");this.depth=o}get $to(){return this.ranges[this.ranges.length-1].$to}eq(i){return i instanceof te&&i.$from.pos===this.$from.pos&&i.$to.pos===this.$to.pos}map(i,r){const o=i.resolve(r.map(this.anchor)),s=i.resolve(r.map(this.head));return new te(o,s)}toJSON(){return{type:"nodeRange",anchor:this.anchor,head:this.head}}get isForwards(){return this.head>=this.anchor}get isBackwards(){return!this.isForwards}extendBackwards(){const{doc:i}=this.$from;if(this.isForwards&&this.ranges.length>1){const s=this.ranges.slice(0,-1),c=s[0].$from,l=s[s.length-1].$to;return new te(c,l,this.depth)}const r=this.ranges[0],o=i.resolve(Math.max(0,r.$from.pos-1));return new te(this.$anchor,o,this.depth)}extendForwards(){const{doc:i}=this.$from;if(this.isBackwards&&this.ranges.length>1){const s=this.ranges.slice(1),c=s[0].$from,l=s[s.length-1].$to;return new te(l,c,this.depth)}const r=this.ranges[this.ranges.length-1],o=i.resolve(Math.min(i.content.size,r.$to.pos+1));return new te(this.$anchor,o,this.depth)}static fromJSON(i,r){return new te(i.resolve(r.anchor),i.resolve(r.head))}static create(i,r,o,s,c=1){return new this(i.resolve(r),i.resolve(o),s,c)}getBookmark(){return new mt(this.anchor,this.head)}}function po(e){const n=e.cloneNode(!0),i=[e,...Array.from(e.getElementsByTagName("*"))],r=[n,...Array.from(n.getElementsByTagName("*"))];return i.forEach((o,s)=>{r[s].style.cssText=function(c){let l="";const a=getComputedStyle(c);for(let h=0;h<a.length;h+=1)l+=`${a[h]}:${a.getPropertyValue(a[h])};`;return l}(o)}),n}function Ie(e,n){return window.getComputedStyle(e)[n]}function wo(e=0,n=0,i=0){return Math.min(Math.max(e,n),i)}function At(e){e.parentNode!==null&&e.parentNode!==void 0&&e.parentNode.removeChild(e)}function gn(e){const{x:n,y:i,direction:r,editor:o}=e;let s=null,c=null,l=null,a=n;for(;c===null&&a<window.innerWidth&&a>0;){const h=document.elementsFromPoint(a,i),u=h.findIndex(m=>m.classList.contains("ProseMirror")),x=h.slice(0,u);if(x.length>0){const m=x[0];if(s=m,l=o.view.posAtDOM(m,0),l>=0){c=o.state.doc.nodeAt(Math.max(l-1,0)),(c===null||c.isText)&&(c=o.state.doc.nodeAt(Math.max(l-1,0))),c||(c=o.state.doc.nodeAt(Math.max(l,0)));break}}r==="left"?a-=1:a+=1}return{resultElement:s,resultNode:c,pos:l!==null?l:null}}function vo(e,n){const{doc:i}=n.view.state,r=gn({editor:n,x:e.clientX,y:e.clientY,direction:"right"});if(!r.resultNode||r.pos===null)return[];const o=e.clientX,s=function(u,x,m){const f=Number.parseInt(Ie(u.dom,"paddingLeft"),10),w=Number.parseInt(Ie(u.dom,"paddingRight"),10),p=Number.parseInt(Ie(u.dom,"borderLeftWidth"),10),g=Number.parseInt(Ie(u.dom,"borderLeftWidth"),10),H=u.dom.getBoundingClientRect();return{left:wo(x,H.left+f+p,H.right-w-g),top:m}}(n.view,o,e.clientY),c=n.view.posAtCoords(s);if(!c)return[];const{pos:l}=c;if(!i.resolve(l).parent)return[];const a=i.resolve(r.pos),h=i.resolve(r.pos+1);return xt(a,h,0)}function Mt(e,n){const i=e.resolve(n),{depth:r}=i;return r===0?n:i.pos-i.parentOffset-1}function Et(e,n){const i=e.nodeAt(n),r=e.resolve(n);let{depth:o}=r,s=i;for(;o>0;){const c=r.node(o);o-=1,o===0&&(s=c)}return s}function Lt(e,n){let i=n;for(;i&&i.parentNode&&i.parentNode!==e.dom;)i=i.parentNode;return i}const pn=new R.PluginKey("dragHandle");function bo({pluginKey:e=pn,element:n,editor:i,tippyOptions:r,onNodeChange:o}){const s=document.createElement("div");let c=null,l=!1,a=null,h=-1;return n.addEventListener("dragstart",u=>{const{view:x}=i;if(!u.dataTransfer)return;const{empty:m,$from:f,$to:w}=x.state.selection,p=vo(u,i),g=xt(f,w,0),H=g.some(L=>p.find(T=>T.$from===L.$from&&T.$to===L.$to)),N=m||!H?p:g;if(N.length===0)return;const{tr:j}=x.state,v=document.createElement("div"),M=N[0].$from.pos,I=N[N.length-1].$to.pos,E=te.create(x.state.doc,M,I),C=E.content();N.forEach(L=>{const T=po(x.nodeDOM(L.$from.pos));v.append(T)}),v.style.position="absolute",v.style.top="-10000px",document.body.append(v),u.dataTransfer.clearData(),u.dataTransfer.setDragImage(v,0,0),x.dragging={slice:C,move:!0},j.setSelection(E),x.dispatch(j),document.addEventListener("drop",()=>At(v),{once:!0}),setTimeout(()=>{n&&(n.style.pointerEvents="none")},0)}),n.addEventListener("dragend",()=>{n&&(n.style.pointerEvents="auto")}),new R.Plugin({key:typeof e=="string"?new R.PluginKey(e):e,state:{init:()=>({locked:!1}),apply(u,x){const m=u.getMeta("lockDragHandle"),f=u.getMeta("hideDragHandle");if(m!==void 0&&(l=m),f&&c)return c.hide(),l=!1,a=null,h=-1,o==null||o({editor:i,node:null,pos:-1}),x;if(u.docChanged&&h!==-1&&n&&c){const w=u.mapping.map(h);w!==h&&(h=w)}return x}},view:u=>{return x(),m(i.view.dom),c=zt(u.dom,{...f(),...r}),{update(v,M){if(!w(n,c)||(n.draggable=!l,!p(v,M)))return;const I=g(v);I&&H(v,I)},destroy(){j()}};function x(){n.draggable=!0,n.style.pointerEvents="auto"}function m(v){var M;(M=v.parentElement)==null||M.appendChild(s),s.appendChild(n),Object.assign(s.style,{pointerEvents:"none",position:"absolute",top:"0",left:"0"})}function f(){return{getReferenceClientRect:null,interactive:!0,trigger:"manual",placement:"left-start",hideOnClick:!1,duration:100,zIndex:10,appendTo:s,content:n,popperOptions:{modifiers:[{name:"flip",enabled:!1},{name:"preventOverflow",options:{rootBoundary:"document",mainAxis:!1}}]}}}function w(v,M){return v&&M}function p(v,M){return!v.state.doc.eq(M.doc)&&h!==-1}function g(v){let M=v.nodeDOM(h);return M=Lt(v,M),M===v.dom||(M==null?void 0:M.nodeType)!==1?null:M}function H(v,M){const I=v.posAtDOM(M,0),E=Et(i.state.doc,I);if(E===a)return;const C=Mt(i.state.doc,I);a=E,h=C,o==null||o({editor:i,node:a,pos:h}),N(M)}function N(v){c.setProps({getReferenceClientRect:()=>v.getBoundingClientRect()}),c.show()}function j(){c==null||c.destroy(),n&&At(s)}},props:{handleDOMEvents:{mouseleave:(u,x)=>{if(l||!m(x))return!1;return f(),w(),!1;function m(p){return p.target&&!s.contains(p.relatedTarget)}function f(){c==null||c.hide()}function w(){a=null,h=-1,o==null||o({editor:i,node:null,pos:-1})}},mousemove:R.debounce((u,x)=>{if(!n||!c||l)return!1;const m=gn({x:x.clientX,y:x.clientY,direction:"right",editor:i});if(!m.resultElement||m.resultElement===u.dom)return!1;const f=Lt(u,m.resultElement);if(f===u.dom||(f==null?void 0:f.nodeType)!==1)return!1;const w=u.posAtDOM(f,0),p=Et(i.state.doc,w);if(p===a)return!1;const g=Mt(i.state.doc,w);return a=p,h=g,o==null||o({editor:i,node:a,pos:h}),c.setProps({getReferenceClientRect:()=>f.getBoundingClientRect()}),c.show(),!1},100)}}})}function jo(e){var C,L,T;const{pluginKey:n=pn}=e,{t:i}=A.useLocale(),[r,o]=d.useState(null),[s,c]=d.useState(-1),l=d.useRef(null),a=d.useRef(null),[h,u]=d.useState(!1),x=e.editor.extensionManager.extensions.some(y=>y.name==="textAlign"),m=e.editor.extensionManager.extensions.some(y=>y.name==="indent"),f=e.editor.extensionManager.extensions.some(y=>y.name==="clear");d.useEffect(()=>{l.current&&!e.editor.isDestroyed&&(a.current=bo({editor:e.editor,element:l.current,pluginKey:"ContentItemMenu",tippyOptions:{offset:[-2,16],zIndex:99,moveTransition:"transform 0.15s ease-out"},onNodeChange:M}),e.editor.registerPlugin(a.current))},[e.editor,l]);function w(){const y=e.editor.chain();y.setNodeSelection(s).unsetAllMarks(),(r==null?void 0:r.type.name)!=="paragraph"&&y.setParagraph(),y.run()}function p(){e.editor.chain().focus().setNodeSelection(s).run(),document.execCommand("copy")}function g(){e.editor.commands.setNodeSelection(s);const{$anchor:y}=e.editor.state.selection,B=y.node(1)||e.editor.state.selection.node;e.editor.chain().setMeta("hideDragHandle",!0).insertContentAt(s+((r==null?void 0:r.nodeSize)||0),B.toJSON()).run()}function H(y){e.editor.commands.setTextAlign(y)}function N(){const y=Ye(e.editor.state.tr,s,1);y.setMeta("hideDragHandle",!0),e.editor.view.dispatch&&e.editor.view.dispatch(y)}function j(){const y=Ye(e.editor.state.tr,s,-1);e.editor.view.dispatch&&e.editor.view.dispatch(y)}function v(){e.editor.chain().setMeta("hideDragHandle",!0).setNodeSelection(s).deleteSelection().run()}function M(y){y.node&&o(y.node),c(y.pos)}function I(){var y;if(s!==-1){const B=(r==null?void 0:r.nodeSize)||0,O=s+B,P=(r==null?void 0:r.type.name)==="paragraph"&&((y=r==null?void 0:r.content)==null?void 0:y.size)===0,D=P?s+2:O+2;e.editor.chain().command(({dispatch:$,tr:q,state:X})=>$?(P?q.insertText("/",s,s+1):q.insert(O,X.schema.nodes.paragraph.create(null,[X.schema.text("/")])),$(q)):!0).focus(D).run()}}d.useEffect(()=>(h?e.editor.commands.setMeta("lockDragHandle",!0):e.editor.commands.setMeta("lockDragHandle",!1),()=>{e.editor.commands.setMeta("lockDragHandle",!1)}),[h]),d.useEffect(()=>()=>{a.current&&(e.editor.unregisterPlugin(n),a.current=null)},[]),d.useEffect(()=>{var y;(y=e.editor)!=null&&y.isDestroyed&&a.current&&(e.editor.unregisterPlugin(n),a.current=null)},[(C=e.editor)==null?void 0:C.isDestroyed]);const E=y=>{e!=null&&e.disabled||u(y)};return t.jsx("div",{ref:l,className:`drag-handle richtext-duration-200 richtext-ease-in-out [transition-property:top,_left] ${e==null?void 0:e.className}`,style:{opacity:e!=null&&e.disabled?0:1},children:t.jsxs("div",{className:"richtext-flex richtext-items-center richtext-gap-0.5 richtext-duration-200 richtext-ease-in-out [transition-property:top,_left]",children:[t.jsx(G,{className:"!richtext-size-7 richtext-cursor-grab",disabled:e==null?void 0:e.disabled,onClick:I,size:"icon",type:"button",variant:"ghost",children:t.jsx(U,{className:"richtext-text-lg richtext-text-neutral-600 dark:richtext-text-neutral-200",name:"Plus"})}),t.jsxs($t,{onOpenChange:E,open:h,children:[t.jsxs("div",{className:"richtext-relative richtext-flex richtext-flex-col",children:[t.jsxs(ot,{children:[t.jsx(st,{asChild:!0,disabled:e==null?void 0:e.disabled,children:t.jsx(G,{className:"richtext-relative richtext-z-[1] !richtext-size-7 richtext-cursor-grab",disabled:e==null?void 0:e.disabled,size:"icon",type:"button",variant:"ghost",onMouseUp:y=>{y.preventDefault(),!(e!=null&&e.disabled)&&u(!0)},children:t.jsx(U,{className:"richtext-text-sm richtext-text-neutral-600 dark:richtext-text-neutral-200",name:"Grip"})})}),t.jsx(Oe,{children:i("editor.draghandle.tooltip")})]}),t.jsx(Ft,{className:"richtext-absolute richtext-left-0 richtext-top-0 richtext-z-0 richtext-size-[28px]"})]}),t.jsxs(et,{align:"start",className:"richtext-w-48",side:"bottom",sideOffset:0,children:[t.jsxs(ee,{className:"richtext-flex richtext-gap-3 richtext-bg-opacity-10 hover:richtext-bg-red-400 hover:richtext-bg-opacity-20 focus:richtext-bg-red-400 focus:richtext-bg-opacity-30 focus:richtext-text-red-500 dark:hover:richtext-bg-opacity-20 dark:hover:richtext-text-red-500",onClick:v,children:[t.jsx(U,{name:"Trash2"}),t.jsx("span",{children:i("editor.remove")})]}),f?t.jsxs(ee,{className:"richtext-flex richtext-gap-3",onClick:w,children:[t.jsx(U,{name:"PaintRoller"}),t.jsx("span",{children:i("editor.clear.tooltip")})]}):null,t.jsxs(ee,{className:"richtext-flex richtext-gap-3",onClick:p,children:[t.jsx(U,{name:"Clipboard"}),t.jsx("span",{children:i("editor.copyToClipboard")})]}),t.jsxs(ee,{className:"richtext-flex richtext-gap-3",onClick:g,children:[t.jsx(U,{name:"Copy"}),t.jsx("span",{children:i("editor.copy")})]}),x||m?t.jsx(tt,{}):null,x?t.jsxs(jt,{children:[t.jsxs(Xe,{className:"richtext-flex richtext-gap-3",children:[t.jsx(U,{name:"AlignCenter"}),t.jsx("span",{children:i("editor.textalign.tooltip")})]}),t.jsx(bt,{children:t.jsxs(Ze,{children:[t.jsxs(ee,{className:"richtext-flex richtext-gap-3",onClick:()=>H("left"),children:[t.jsx(U,{name:"AlignLeft"}),t.jsx("span",{children:i("editor.textalign.left.tooltip")})]}),t.jsxs(ee,{className:"richtext-flex richtext-gap-3",onClick:()=>H("center"),children:[t.jsx(U,{name:"AlignCenter"}),t.jsx("span",{children:i("editor.textalign.center.tooltip")})]}),t.jsxs(ee,{className:"richtext-flex richtext-gap-3",onClick:()=>H("right"),children:[t.jsx(U,{name:"AlignRight"}),t.jsx("span",{children:i("editor.textalign.right.tooltip")})]})]})})]}):null,m?t.jsxs(jt,{children:[t.jsxs(Xe,{className:"richtext-flex richtext-gap-3",children:[t.jsx(U,{name:"IndentIncrease"}),t.jsx("span",{children:i("editor.indent")})]}),t.jsx(bt,{children:t.jsxs(Ze,{children:[t.jsxs(ee,{className:"richtext-flex richtext-gap-3",disabled:((L=r==null?void 0:r.attrs)==null?void 0:L.indent)>=De.max,onClick:N,children:[t.jsx(U,{name:"IndentIncrease"}),t.jsx("span",{children:i("editor.indent.tooltip")})]}),t.jsxs(ee,{className:"richtext-flex richtext-gap-3",disabled:((T=r==null?void 0:r.attrs)==null?void 0:T.indent)<=De.min,onClick:j,children:[t.jsx(U,{name:"IndentDecrease"}),t.jsx("span",{children:i("editor.outdent.tooltip")})]})]})})]}):null]})]})]})})}const Co={maxWidth:"auto",zIndex:20,appendTo:"parent",moveTransition:"transform 0.1s ease-out"};function yo({item:e,disabled:n,editor:i}){var o;const r=e.component;return r?t.jsx(r,{...e.componentProps,disabled:n||((o=e==null?void 0:e.componentProps)==null?void 0:o.disabled),editor:i}):t.jsx(t.Fragment,{})}function To(e){const{t:n,lang:i}=A.useLocale(),r=({editor:s})=>{const{selection:c}=s.view.state,{$from:l,to:a}=c;return l.pos===a?!1:c instanceof R.TextSelection},o=d.useMemo(()=>e.disabled||!(e!=null&&e.editor)?[]:go(e.editor,n),[e.disabled,e.editor,i,n]);return t.jsx(z.BubbleMenu,{editor:e==null?void 0:e.editor,shouldShow:r,tippyOptions:Co,children:o!=null&&o.length?t.jsx("div",{className:"richtext-pointer-events-auto richtext-w-auto richtext-select-none richtext-rounded-sm !richtext-border richtext-border-neutral-200 richtext-bg-background richtext-px-3 richtext-py-2 richtext-shadow-sm richtext-transition-all dark:richtext-border-neutral-800",children:t.jsx("div",{className:"richtext-relative richtext-flex richtext-h-[26px] richtext-flex-nowrap richtext-items-center richtext-justify-start richtext-gap-[4px] richtext-whitespace-nowrap",children:o==null?void 0:o.map((s,c)=>(s==null?void 0:s.type)==="divider"?t.jsx(Q,{className:"!richtext-mx-1 !richtext-my-2 !richtext-h-[16px]",orientation:"vertical"},`bubbleMenu-divider-${c}`):t.jsx(yo,{disabled:e.disabled,editor:e.editor,item:s},`bubbleMenu-text-${c}`))})}):t.jsx(t.Fragment,{})})}function No({editor:e,disabled:n,actions:i}){var g,H,N,j,v,M,I,E,C,L,T,y,B,O,P,D,$,q;const r=({editor:X})=>z.isActive(X.view.state,"table"),{t:o}=A.useLocale();function s(){e.chain().focus().addColumnBefore().run()}function c(){e.chain().focus().addColumnAfter().run()}function l(){e.chain().focus().deleteColumn().run()}function a(){e.chain().focus().addRowBefore().run()}function h(){e.chain().focus().addRowAfter().run()}function u(){e.chain().focus().deleteRow().run()}function x(){e.chain().focus().mergeCells().run()}function m(){e==null||e.chain().focus().splitCell().run()}function f(){e.chain().focus().deleteTable().run()}function w(X){e.chain().focus().setTableCellBackground(X).run()}const p=()=>{var vt;const{view:X,state:{selection:{from:ie}}}=e,de=X.domAtPos(ie).node;if(!de)return new DOMRect(-1e3,-1e3,0,0);const wt=(vt=de==null?void 0:de.closest)==null?void 0:vt.call(de,".tableWrapper");return wt?wt.getBoundingClientRect():new DOMRect(-1e3,-1e3,0,0)};return t.jsx(z.BubbleMenu,{editor:e,pluginKey:"table",shouldShow:r,updateDelay:0,tippyOptions:{offset:[0,8],popperOptions:{modifiers:[{name:"flip",enabled:!1}]},maxWidth:"auto",getReferenceClientRect:p,plugins:[zt.sticky],sticky:"popper"},children:n?t.jsx(t.Fragment,{}):t.jsxs("div",{className:"richtext-flex richtext-size-full richtext-min-w-32 richtext-flex-row richtext-items-center richtext-gap-0.5 richtext-rounded-lg !richtext-border richtext-border-border richtext-bg-background richtext-p-2 richtext-leading-none richtext-shadow-sm",children:[t.jsx(_,{action:s,disabled:!((H=(g=e==null?void 0:e.can())==null?void 0:g.addColumnBefore)!=null&&H.call(g)),icon:"BetweenHorizonalEnd",tooltip:o("editor.table.menu.insertColumnBefore"),"tooltip-options":{sideOffset:15}}),t.jsx(_,{action:c,disabled:!((j=(N=e==null?void 0:e.can())==null?void 0:N.addColumnAfter)!=null&&j.call(N)),icon:"BetweenHorizonalStart",tooltip:o("editor.table.menu.insertColumnAfter"),"tooltip-options":{sideOffset:15}}),t.jsx(_,{action:l,disabled:!((M=e==null?void 0:(v=e.can()).deleteColumn)!=null&&M.call(v)),icon:"DeleteColumn",tooltip:o("editor.table.menu.deleteColumn"),"tooltip-options":{sideOffset:15}}),t.jsx(Q,{className:"!richtext-mx-1 !richtext-my-2 !richtext-h-[16px]",orientation:"vertical"}),t.jsx(_,{action:a,disabled:!((E=e==null?void 0:(I=e.can()).addRowBefore)!=null&&E.call(I)),icon:"BetweenVerticalEnd",tooltip:o("editor.table.menu.insertRowAbove"),"tooltip-options":{sideOffset:15}}),t.jsx(_,{action:h,disabled:!((L=(C=e==null?void 0:e.can())==null?void 0:C.addRowAfter)!=null&&L.call(C)),icon:"BetweenVerticalStart",tooltip:o("editor.table.menu.insertRowBelow"),"tooltip-options":{sideOffset:15}}),t.jsx(_,{action:u,disabled:!((y=(T=e==null?void 0:e.can())==null?void 0:T.deleteRow)!=null&&y.call(T)),icon:"DeleteRow",tooltip:o("editor.table.menu.deleteRow"),"tooltip-options":{sideOffset:15}}),t.jsx(Q,{className:"!richtext-mx-1 !richtext-my-2 !richtext-h-[16px]",orientation:"vertical"}),t.jsx(_,{action:x,disabled:!((O=(B=e==null?void 0:e.can())==null?void 0:B.mergeCells)!=null&&O.call(B)),icon:"TableCellsMerge",tooltip:o("editor.table.menu.mergeCells"),"tooltip-options":{sideOffset:15}}),t.jsx(_,{action:m,disabled:!((D=(P=e==null?void 0:e.can())==null?void 0:P.splitCell)!=null&&D.call(P)),icon:"TableCellsSplit",tooltip:o("editor.table.menu.splitCells"),"tooltip-options":{sideOffset:15}}),t.jsx(Q,{className:"!richtext-mx-1 !richtext-my-2 !richtext-h-[16px]",orientation:"vertical"}),t.jsx(rn,{action:w,editor:e,tooltip:o("editor.table.menu.setCellsBgColor"),tooltipOptions:{sideOffset:15}}),t.jsx(_,{action:f,disabled:!((q=($=e==null?void 0:e.can())==null?void 0:$.deleteTable)!=null&&q.call($)),icon:"Trash2",tooltip:o("editor.table.menu.deleteTable"),"tooltip-options":{sideOffset:15}}),i&&i.map((X,ie)=>t.jsx(_,{...X},ie))]})})}function So(e){const{t:n}=A.useLocale();return t.jsxs("div",{className:"richtext-flex richtext-items-center richtext-gap-2 richtext-p-2 richtext-bg-white !richtext-border richtext-rounded-lg richtext-shadow-sm dark:richtext-bg-black richtext-border-neutral-200 dark:richtext-border-neutral-800",children:[t.jsx("a",{href:e==null?void 0:e.link,target:"_blank",rel:"noopener noreferrer",className:"richtext-text-sm richtext-underline richtext-break-all",children:R.truncate(e==null?void 0:e.link,{length:50,omission:"…"})}),(e==null?void 0:e.link)&&t.jsx(Q,{orientation:"vertical",className:"!richtext-h-4"}),t.jsxs("div",{className:"richtext-flex richtext-flex-nowrap",children:[t.jsx(_,{icon:"Pencil",tooltip:n("editor.link.edit.tooltip"),action:()=>{e==null||e.onEdit()},tooltipOptions:{sideOffset:15}}),t.jsx(_,{icon:"Unlink",tooltip:n("editor.link.unlink.tooltip"),action:()=>{e==null||e.onClear()},tooltipOptions:{sideOffset:15}})]})]})}function ko({editor:e,disabled:n}){const[i,r]=d.useState(!1),o=d.useMemo(()=>{const{href:a}=e.getAttributes("link");return a},[e]),s=d.useCallback(({editor:a})=>a.isActive("link"),[]),c=(a,h,u)=>{e.chain().extendMarkRange("link").insertContent({type:"text",text:h,marks:[{type:"link",attrs:{href:a,target:u?"_blank":""}}]}).setLink({href:a}).focus().run(),r(!1)},l=d.useCallback(()=>{e.chain().extendMarkRange("link").unsetLink().focus().run(),r(!1)},[e]);return t.jsx(t.Fragment,{children:t.jsx(z.BubbleMenu,{editor:e,shouldShow:s,tippyOptions:{popperOptions:{modifiers:[{name:"flip",enabled:!1}]},placement:"bottom-start",offset:[-2,16],zIndex:9999,onHidden:()=>{r(!1)}},children:n?t.jsx(t.Fragment,{}):t.jsx(t.Fragment,{children:i?t.jsx(on,{onSetLink:c,editor:e}):t.jsx(So,{editor:e,onClear:l,onEdit:()=>{r(!0)},link:o})})})})}const ft={maxWidth:"auto",zIndex:20,appendTo:"parent",moveTransition:"transform 0.1s ease-out"};function gt({item:e,disabled:n,editor:i}){var o;const r=e.component;return r?t.jsx(d.Fragment,{children:e.type==="divider"?t.jsx(Q,{className:"!richtext-mx-1 !richtext-my-2 !richtext-h-[16px]",orientation:"vertical"}):t.jsx(r,{...e.componentProps,disabled:n||((o=e==null?void 0:e.componentProps)==null?void 0:o.disabled),editor:i})}):t.jsx(t.Fragment,{})}function Ao(e){return e.type.name===ue.name}function Mo(e){return e.type.name===ht.name}function Eo(e){return e.type.name===dt.name}function Lo(e){const{lang:n}=A.useLocale(),i=({editor:o})=>{const{selection:s}=o.view.state,{$from:c,to:l}=s;let a=!1;return o.view.state.doc.nodesBetween(c.pos,l,h=>{if(Ao(h))return a=!0,!1}),a},r=d.useMemo(()=>e.disabled?[]:uo(e.editor),[e.disabled,e.editor,n]);return t.jsx(t.Fragment,{children:t.jsx(z.BubbleMenu,{editor:e==null?void 0:e.editor,shouldShow:i,tippyOptions:ft,children:r!=null&&r.length?t.jsx("div",{className:"richtext-pointer-events-auto richtext-w-auto richtext-select-none richtext-rounded-sm !richtext-border richtext-border-neutral-200 richtext-bg-background richtext-px-3 richtext-py-2 richtext-shadow-sm richtext-transition-all dark:richtext-border-neutral-800",children:t.jsx("div",{className:"richtext-relative richtext-flex richtext-h-[26px] richtext-flex-nowrap richtext-items-center richtext-justify-start richtext-whitespace-nowrap",children:r==null?void 0:r.map((o,s)=>t.jsx(gt,{disabled:e.disabled,editor:e.editor,item:o},`bubbleMenu-image-${s}`))})}):t.jsx(t.Fragment,{})})})}function Io(e){const{lang:n}=A.useLocale(),i=({editor:o})=>{const{selection:s}=o.view.state,{$from:c,to:l}=s;let a=!1;return o.view.state.doc.nodesBetween(c.pos,l,h=>{if(Mo(h))return a=!0,!1}),a},r=d.useMemo(()=>e.disabled?[]:xo(e.editor),[e.disabled,e.editor,n]);return t.jsx(t.Fragment,{children:t.jsx(z.BubbleMenu,{editor:e==null?void 0:e.editor,shouldShow:i,tippyOptions:ft,children:r!=null&&r.length?t.jsx("div",{className:"richtext-pointer-events-auto richtext-w-auto richtext-select-none richtext-rounded-sm !richtext-border richtext-border-neutral-200 richtext-bg-background richtext-px-3 richtext-py-2 richtext-shadow-sm richtext-transition-all dark:richtext-border-neutral-800",children:t.jsx("div",{className:"richtext-relative richtext-flex richtext-h-[26px] richtext-flex-nowrap richtext-items-center richtext-justify-start richtext-whitespace-nowrap",children:r==null?void 0:r.map((o,s)=>t.jsx(gt,{disabled:e.disabled,editor:e.editor,item:o},`bubbleMenu-image-gif-${s}`))})}):t.jsx(t.Fragment,{})})})}function Ro(e){const{lang:n}=A.useLocale(),i=({editor:o})=>{const{selection:s}=o.view.state,{$from:c,to:l}=s;let a=!1;return o.view.state.doc.nodesBetween(c.pos,l,h=>{if(Eo(h))return a=!0,!1}),a},r=d.useMemo(()=>e.disabled?[]:fo(e.editor),[e.editor,e.disabled,n]);return t.jsx(t.Fragment,{children:t.jsx(z.BubbleMenu,{editor:e==null?void 0:e.editor,shouldShow:i,tippyOptions:ft,children:r!=null&&r.length?t.jsx("div",{className:"richtext-pointer-events-auto richtext-w-auto richtext-select-none richtext-rounded-sm !richtext-border richtext-border-neutral-200 richtext-bg-background richtext-px-3 richtext-py-2 richtext-shadow-sm richtext-transition-all dark:richtext-border-neutral-800",children:t.jsx("div",{className:"richtext-relative richtext-flex richtext-h-[26px] richtext-flex-nowrap richtext-items-center richtext-justify-start richtext-whitespace-nowrap",children:r==null?void 0:r.map((o,s)=>t.jsx(gt,{disabled:e.disabled,editor:e.editor,item:o},`bubbleMenu-video-${s}`))})}):t.jsx(t.Fragment,{})})})}function Po({editor:e}){const{t:n}=A.useLocale(),i=d.useCallback(()=>e.isActive(ye.name),[e]),r=d.useCallback(()=>ut(ye.name,e),[e]),o=d.useCallback(()=>e.chain().focus().addColBefore().run(),[e]),s=d.useCallback(()=>e.chain().focus().addColAfter().run(),[e]),c=d.useCallback(()=>e.chain().focus().deleteCol().run(),[e]);return t.jsx(z.BubbleMenu,{pluginKey:"columns-bubble-menu",editor:e,shouldShow:i,tippyOptions:{popperOptions:{modifiers:[{name:"flip",enabled:!1}]},placement:"bottom-start",offset:[-2,16],zIndex:9999},children:t.jsxs("div",{className:"richtext-w-auto richtext-px-3 richtext-py-2 richtext-transition-all !richtext-border richtext-rounded-sm richtext-shadow-sm richtext-pointer-events-auto richtext-select-none richtext-border-neutral-200 dark:richtext-border-neutral-800 richtext-bg-background",children:[t.jsx(_,{action:o,icon:"ColumnAddLeft",tooltip:n("editor.table.menu.insertColumnBefore")}),t.jsx(_,{action:s,icon:"ColumnAddRight",tooltip:n("editor.table.menu.insertColumnAfter")}),t.jsx(_,{action:c,icon:"DeleteColumn",tooltip:n("editor.table.menu.deleteColumn")}),t.jsx(_,{action:r,icon:"Trash2",tooltip:n("editor.table.menu.delete_column")})]})})}function zo({editor:e,extensions:n}){const{t:i}=A.useLocale(),r=d.useMemo(()=>{var o,s,c;return(c=(s=(o=n==null?void 0:n.find(l=>l.name==="base-kit"))==null?void 0:o.options)==null?void 0:s.characterCount)==null?void 0:c.limit},[n]);return r?t.jsx("div",{className:"richtext-flex richtext-items-center richtext-justify-between richtext-p-3 richtext-border-t",children:t.jsx("div",{className:"richtext-flex richtext-flex-col",children:t.jsx("div",{className:"richtext-flex richtext-justify-end richtext-gap-3 richtext-text-sm",children:t.jsxs("span",{children:[e.storage.characterCount.characters(),"/",r," ",i("editor.characters")]})})})}):t.jsx("div",{className:"richtext-flex richtext-items-center richtext-justify-between richtext-p-3 richtext-border-t",children:t.jsx("div",{className:"richtext-flex richtext-flex-col",children:t.jsx("div",{className:"richtext-flex richtext-justify-end richtext-gap-3 richtext-text-sm",children:t.jsxs("span",{children:[e.storage.characterCount.characters()," ",i("editor.characters")]})})})})}function Do(){const{toasts:e}=Jt();return t.jsxs(Xn,{children:[e.map(({id:n,title:i,description:r,action:o,...s})=>t.jsxs(Xt,{...s,children:[t.jsxs("div",{className:"richtext-grid richtext-gap-1",children:[i&&t.jsx(Yt,{children:i}),r&&t.jsx(Kt,{children:r})]}),o,t.jsx(Zt,{})]},n)),t.jsx(Ut,{})]})}const _o=`
.reactjs-tiptap-editor,
.richtext-dialog-content {
  button,
  input:where([type=button]),
  input:where([type=reset]),
  input:where([type=submit]) {
    -webkit-appearance: button;
    background-color: transparent;
    background-image: none;
  }

  input,
  optgroup,
  select {
    font-family: inherit;
    font-feature-settings: inherit;
    font-variation-settings: inherit;
    font-size: 100%;
    font-weight: inherit;
    line-height: inherit;
    letter-spacing: inherit;
    color: inherit;
  }

  button {
    font-family: inherit;
    font-feature-settings: inherit;
    font-variation-settings: inherit;
    font-size: 100%;
    font-weight: inherit;
    line-height: inherit;
    letter-spacing: inherit;
    color: inherit;
  }

  *,
  ::before,
  ::after {
    box-sizing: border-box;
    border-width: 0;
    border-style: solid;
    border-color: hsl(var(--richtext-border));
  }

  background-color: hsl(var(--richtext-background));
  color: hsl(var(--richtext-foreground));

  hr {
    height: 0;
    color: inherit;
    border-top-width: 1px;
  }

  a {
    color: inherit;
    text-decoration: inherit;
  }

  b,
  strong {
    font-weight: bolder;
  }

  code,
  kbd,
  samp,
  pre {
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace;
    font-feature-settings: normal;
    font-variation-settings: normal;
    font-size: 1em;
  }

  table {
    text-indent: 0;
    border-color: inherit;
    border-collapse: collapse;
  }

  input {
    border-width: 1px;
  }


  input::placeholder {
    opacity: 1;
    color: #9ca3af;
  }

  button, input {
    cursor: pointer;
    color: inherit;
  }

  img,
  svg,
  video,
  canvas,
  audio,
  iframe,
  embed,
  object {
    display: block;
    vertical-align: middle;
  }

  img,
  video {
    max-width: 100%;
    height: auto;
  }
}

div[data-radix-popper-content-wrapper],
div[data-tippy-root] {
  *,
  ::before,
  ::after {
    box-sizing: border-box;
    border-width: 0;
    border-style: solid;
    border-color: hsl(var(--richtext-border));
  }

  background-color: hsl(var(--richtext-background));
  color: hsl(var(--richtext-foreground));

  button, input {
    cursor: pointer;
    color: inherit;
  }
}
`,Oo=d.memo(({children:e,id:n})=>{const[,i]=sn(c=>c.value),[,r]=Li(c=>c.value),o=c=>{i({value:c.detail})},s=c=>{r({value:c.detail})};return d.useEffect(()=>{const c=Te(re.EDIT(n),o),l=Te(re.UPDATE_THEME(n),s);return()=>{c(),l()}},[]),t.jsx(t.Fragment,{children:e})});function Ho({children:e,id:n}){return t.jsx(Mi,{children:t.jsx(Ei,{children:t.jsx(Oo,{id:n,children:e})})})}const Bo={setTheme:(e,n)=>{Be(re.UPDATE_THEME(e),n)}},It="data-rc-order",Rt="data-rc-priority",Vo="rc-util-key",Qe=new Map;function $o(e,n){if(!e)return!1;if(e.contains)return e.contains(n);let i=n;for(;i;){if(i===e)return!0;i=i.parentNode}return!1}function wn({mark:e}={}){return e?e.startsWith("data-")?e:`data-${e}`:Vo}function pt(e){return e.attachTo?e.attachTo:document.querySelector("head")||document.body}function Fo(e){return e==="queue"?"prependQueue":e?"prepend":"append"}function vn(e){return[...(Qe.get(e)||e).children].filter(n=>n.tagName==="STYLE")}function bn(e,n={}){const{csp:i,prepend:r,priority:o=0}=n,s=Fo(r),c=s==="prependQueue",l=document.createElement("style");l.setAttribute(It,s),c&&o&&l.setAttribute(Rt,`${o}`),i!=null&&i.nonce&&(l.nonce=i==null?void 0:i.nonce),l.innerHTML=e;const a=pt(n),{firstChild:h}=a;if(r){if(c){const u=vn(a).filter(x=>{if(!["prepend","prependQueue"].includes(x.getAttribute(It)))return!1;const m=Number(x.getAttribute(Rt)||0);return o>=m});if(u.length>0)return a.insertBefore(l,u.at(-1).nextSibling),l}h.before(l)}else a.append(l);return l}function jn(e,n={}){const i=pt(n);return vn(i).find(r=>r.getAttribute(wn(n))===e)}function Wo(e,n={}){const i=jn(e,n);i&&i.remove()}function qo(e,n){const i=Qe.get(e);if(!i||!$o(document,i)){const r=bn("",n),{parentNode:o}=r;Qe.set(e,o),r.remove()}}function Go(e,n,i={}){var c,l,a;const r=pt(i);qo(r,i);const o=jn(n,i);if(o)return(c=i.csp)!=null&&c.nonce&&o.nonce!==((l=i.csp)==null?void 0:l.nonce)&&(o.nonce=(a=i.csp)==null?void 0:a.nonce),o.innerHTML!==e&&(o.innerHTML=e),o;const s=bn(e,i);return s.setAttribute(wn(i),n),s}function Uo(e,n){const{content:i,extensions:r,useEditorOptions:o={}}=e,s=d.useId(),c=d.useMemo(()=>{const x=R.differenceBy(r,r,"name");return[...r.map(f=>{const w=r.find(p=>p.name===f.name);return w?f.configure(w.options):f}),...x].map((f,w)=>f.configure({sort:w}))},[r]),l=R.throttle(x=>{var f;const m=h(x,e.output);(f=e==null?void 0:e.onChangeContent)==null||f.call(e,m)},A.EDITOR_UPDATE_WATCH_THROTTLE_WAIT_TIME),a=z.useEditor({extensions:c,content:i,onUpdate:({editor:x})=>{l&&l(x)},...o});d.useImperativeHandle(n,()=>({editor:a})),d.useEffect(()=>{document.documentElement.classList.toggle("dark",e.dark),Bo.setTheme(s,e.dark?"dark":"light")},[e.dark]),d.useEffect(()=>{a==null||a.setEditable(!(e!=null&&e.disabled)),Ji.setDisable(s,!(e!=null&&e.disabled))},[a,e==null?void 0:e.disabled]),d.useEffect(()=>((e==null?void 0:e.resetCSS)!==!1&&Go(_o,"react-tiptap-reset"),()=>{Wo("react-tiptap-reset")}),[e==null?void 0:e.resetCSS]);function h(x,m){return e!=null&&e.removeDefaultWrapper?m==="html"?x.isEmpty?"":x.getHTML():m==="json"?x.isEmpty?{}:x.getJSON():m==="text"?x.isEmpty?"":x.getText():"":m==="html"?x.getHTML():m==="json"?x.getJSON():m==="text"?x.getText():""}d.useLayoutEffect(()=>{a&&(a.id=s)},[s,a]),d.useEffect(()=>()=>{var x;(x=a==null?void 0:a.destroy)==null||x.call(a)},[]);const u=Vt(a,"characterCount");return a?t.jsxs("div",{className:"reactjs-tiptap-editor",children:[t.jsx(Ho,{id:s,children:t.jsx(Jn,{delayDuration:0,disableHoverableContent:!0,children:t.jsx("div",{className:"richtext-overflow-hidden richtext-rounded-[0.5rem] richtext-bg-background richtext-shadow richtext-outline richtext-outline-1",children:t.jsxs("div",{className:"richtext-flex richtext-max-h-full richtext-w-full richtext-flex-col",children:[!(e!=null&&e.hideToolbar)&&t.jsx(ro,{disabled:!!(e!=null&&e.disabled),editor:a,toolbar:e.toolbar}),t.jsx(z.EditorContent,{className:`richtext-relative ${(e==null?void 0:e.contentClass)||""}`,editor:a}),u&&t.jsx(zo,{editor:a,extensions:r}),!(e!=null&&e.hideBubble)&&t.jsx(no,{bubbleMenu:e==null?void 0:e.bubbleMenu,disabled:e==null?void 0:e.disabled,editor:a})]})})})}),t.jsx(Do,{})]}):t.jsx(t.Fragment,{})}const Xo=d.forwardRef(Uo);exports.ActionButton=_;exports.Button=G;exports.ColorPicker=fn;exports.Column=at;exports.Drawer=Je;exports.DropdownMenu=$t;exports.DropdownMenuCheckboxItem=Wt;exports.DropdownMenuContent=et;exports.DropdownMenuSeparator=tt;exports.DropdownMenuShortcut=qt;exports.DropdownMenuTrigger=Ft;exports.EVENTS=re;exports.ExportPdf=tn;exports.ExportWord=nn;exports.HighlightActionButton=rn;exports.IconComponent=U;exports.Iframe=oe;exports.Image=ue;exports.ImageGif=ht;exports.IndentProps=De;exports.Input=Z;exports.Label=ne;exports.LinkEditBlock=on;exports.MenuDown=en;exports.MultiColumn=ye;exports.Popover=xe;exports.PopoverContent=ce;exports.PopoverTrigger=me;exports.RichTextEditor=Xo;exports.Switch=nt;exports.Toggle=rt;exports.Tooltip=ot;exports.TooltipContent=Oe;exports.TooltipTrigger=st;exports.Twitter=_e;exports.Video=dt;exports.actionDialogImage=cn;exports.cn=k;exports.createIndentCommand=Ai;exports.dispatchEvent=Be;exports.ensureNameValueOptions=Fn;exports.extractFileExtension=zi;exports.extractFilename=Pi;exports.getDatasetAttribute=ze;exports.getShortcutKey=Ht;exports.getShortcutKeys=Bt;exports.hasExtension=Vt;exports.icons=ct;exports.listenEvent=Te;exports.normalizeFileSize=Di;exports.normalizeFileType=_i;exports.useEditableEditor=dn;exports.useToast=Jt;
